<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SamuelQ - 个人网站</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="3d-card.js"></script>
    <script src="script.js"></script>
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <!-- Leaflet JavaScript -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <!-- 科技感旅行地图组件 -->
    <script src="tech-travel-map.js"></script>
    

    
    <script>
        // 全局函数定义 - 优化版本
        function createTravelDetailsCard() {
            const card = document.createElement('div');
            card.className = 'travel-details-card';
            card.innerHTML = `
                <div class="card-content">
                    <div class="card-header">
                        <h3 class="card-title">✈️ Travel Journey</h3>
                        <p class="card-subtitle">My adventures around the world</p>
                    </div>
                    
                    <div class="travel-stats-grid">
                        <div class="stat-item">
                            <div class="stat-icon">🌍</div>
                            <div class="stat-number">11</div>
                            <div class="stat-label">Destinations</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-icon">🏙️</div>
                            <div class="stat-number">15+</div>
                            <div class="stat-label">Cities</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-icon">🗺️</div>
                            <div class="stat-number">3</div>
                            <div class="stat-label">Continents</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-icon">⏰</div>
                            <div class="stat-number">12</div>
                            <div class="stat-label">Years</div>
                        </div>
                    </div>
                    
                    <div class="travel-timeline-mini">
                        <h4>Journey Timeline</h4>
                        <div class="timeline-items">
                            <div class="timeline-item-mini">
                                <span class="age">Age 3</span>
                                <span class="location">Thailand</span>
                            </div>
                            <div class="timeline-item-mini">
                                <span class="age">Age 6</span>
                                <span class="location">Taiwan</span>
                            </div>
                            <div class="timeline-item-mini">
                                <span class="age">Age 8</span>
                                <span class="location">Xi'an</span>
                            </div>
                            <div class="timeline-item-mini">
                                <span class="age">Age 9</span>
                                <span class="location">Hong Kong + Macau</span>
                            </div>
                            <div class="timeline-item-mini">
                                <span class="age">Age 10</span>
                                <span class="location">Singapore + Malaysia</span>
                            </div>
                            <div class="timeline-item-mini">
                                <span class="age">Age 12</span>
                                <span class="location">Dubai</span>
                            </div>
                            <div class="timeline-item-mini">
                                <span class="age">Age 14</span>
                                <span class="location">Yunnan + Guizhou</span>
                            </div>
                            <div class="timeline-item-mini">
                                <span class="age">Age 15</span>
                                <span class="location">USA</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="travel-quote">
                        <span class="quote-icon">💭</span>
                        "Every journey shapes a new perspective"
                    </div>
                </div>
            `;
            
            return card;
        }
        
        // 旧的showTravelDetails函数已删除，使用新的弹窗版本
        
        // 初始化旅行详情按钮 - 完全独立版本
        function initTravelDetailsButton() {
            console.log('🚀 初始化旅行详情按钮 - 完全独立版本...');
            
            // 查找按钮
            const statsButton = document.querySelector('.stats-button');
            if (!statsButton) {
                console.error('❌ 没有找到 stats-button 按钮！');
                return;
            }
            
            console.log('✅ 找到 stats-button 按钮:', statsButton);
            console.log('按钮文本:', statsButton.textContent);
            console.log('按钮类名:', statsButton.className);
            
            // 移除所有现有的事件监听器
            const newButton = statsButton.cloneNode(true);
            statsButton.parentNode.replaceChild(newButton, statsButton);
            
            // 重新绑定事件
            newButton.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                console.log('🖱️ View Travel Photos 按钮被点击！');
                showPhotosModal();
            });
            
            // 添加悬停效果
            newButton.style.cursor = 'pointer';
            newButton.style.transition = 'all 0.3s ease';
            
            newButton.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-2px)';
                this.style.boxShadow = '0 8px 25px rgba(0, 0, 0, 0.2)';
            });
            
            newButton.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
                this.style.boxShadow = '0 4px 15px rgba(0, 0, 0, 0.1)';
            });
            
            console.log('✅ 旅行详情按钮事件绑定完成');
        }
        

        

        

            
            // 初始化图表功能
            function initCharts() {
                console.log('📊 开始初始化图表...');
                
                // 检查 Chart.js 是否可用
                if (typeof Chart === 'undefined') {
                    console.error('❌ Chart.js 未加载');
                    return;
                }
                console.log('✅ Chart.js 已加载');
                
                // 初始化时间分布图表
                const timeChartCtx = document.getElementById('timeChart');
                if (timeChartCtx) {
                    console.log('✅ 找到时间图表画布');
                    const timeChart = new Chart(timeChartCtx, {
                        type: 'bar',
                        data: {
                            labels: ['2 years', '3 years', '4 years', '5 years', '6 years', '7 years', '8 years', '9 years', '10 years', '11 years', '12 years', '13 years', '14 years', '15 years', '16 years'],
                            datasets: [{
                                label: 'Learning',
                                data: [90, 90, 90, 90, 90, 85, 85, 80, 80, 75, 75, 75, 80, 70, 70],
                                backgroundColor: 'rgba(74, 144, 226, 0.8)',
                                borderColor: '#4A90E2',
                                borderWidth: 1
                            }, {
                                label: 'Go Strategy',
                                data: [0, 0, 0, 0, 0, 15, 15, 15, 15, 15, 0, 0, 0, 0, 0],
                                backgroundColor: 'rgba(126, 211, 33, 0.8)',
                                borderColor: '#7ED321',
                                borderWidth: 1
                            }, {
                                label: 'Mineral Research',
                                data: [0, 0, 0, 0, 0, 0, 0, 10, 10, 10, 10, 10, 10, 10, 10],
                                backgroundColor: 'rgba(80, 227, 194, 0.8)',
                                borderColor: '#50E3C2',
                                borderWidth: 1
                            }, {
                                label: 'Swimming',
                                data: [0, 0, 0, 0, 0, 0, 0, 0, 10, 10, 10, 10, 10, 10, 10],
                                backgroundColor: 'rgba(245, 166, 35, 0.8)',
                                borderColor: '#F5A623',
                                borderWidth: 1
                            }, {
                                label: 'Guitar',
                                data: [0, 0, 0, 0, 0, 0, 0, 0, 0, 10, 10, 10, 10, 10, 10],
                                backgroundColor: 'rgba(189, 16, 224, 0.8)',
                                borderColor: '#BD10E0',
                                borderWidth: 1
                            }, {
                                label: 'Robotics & 3D',
                                data: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 15],
                                backgroundColor: 'rgba(255, 107, 107, 0.8)',
                                borderColor: '#FF6B6B',
                                borderWidth: 1
                            }, {
                                label: 'UI/UX Design',
                                data: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 15],
                                backgroundColor: 'rgba(78, 205, 196, 0.8)',
                                borderColor: '#4ECDC4',
                                borderWidth: 1
                            }, {
                                label: 'Coding',
                                data: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 10, 10],
                                backgroundColor: 'rgba(150, 206, 180, 0.8)',
                                borderColor: '#96CEB4',
                                borderWidth: 1
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    display: false
                                }
                            },
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    max: 100
                                }
                            }
                        }
                    });
                    console.log('✅ 时间图表初始化完成');
                } else {
                    console.error('❌ 未找到时间图表画布');
                }
                
                // 初始化年龄活动分布图表
                const ageChartCtx = document.getElementById('ageChart');
                if (ageChartCtx) {
                    console.log('✅ 找到年龄活动图表画布');
                    const ageChart = new Chart(ageChartCtx, {
                        type: 'bar',
                        data: {
                            labels: ['0-2 years', '3-5 years', '6-8 years', '10-12 years', '12-14 years', '15 years', '15-16 years'],
                            datasets: [{
                                label: 'Family & Learning',
                                data: [100, 100, 80, 60, 80, 92, 45],
                                backgroundColor: '#4A90E2',
                                borderColor: '#4A90E2',
                                borderWidth: 0
                            }, {
                                label: 'Go Strategy',
                                data: [0, 0, 18, 0, 0, 0, 0],
                                backgroundColor: '#7ED321',
                                borderColor: '#7ED321',
                                borderWidth: 0
                            }, {
                                label: 'Mineral Interest',
                                data: [0, 0, 2, 5, 2, 0, 5],
                                backgroundColor: '#50E3C2',
                                borderColor: '#50E3C2',
                                borderWidth: 0
                            }, {
                                label: 'Swimming',
                                data: [0, 0, 0, 20, 10, 8, 15],
                                backgroundColor: '#F5A623',
                                borderColor: '#F5A623',
                                borderWidth: 0
                            }, {
                                label: 'Guitar',
                                data: [0, 0, 0, 15, 8, 0, 12],
                                backgroundColor: '#BD10E0',
                                borderColor: '#BD10E0',
                                borderWidth: 0
                            }, {
                                label: 'Robotics & 3D',
                                data: [0, 0, 0, 0, 0, 0, 8],
                                backgroundColor: '#FF6B6B',
                                borderColor: '#FF6B6B',
                                borderWidth: 0
                            }, {
                                label: 'UI/UX Design',
                                data: [0, 0, 0, 0, 0, 0, 8],
                                backgroundColor: '#4ECDC4',
                                borderColor: '#4ECDC4',
                                borderWidth: 0
                            }, {
                                label: 'Coding',
                                data: [0, 0, 0, 0, 0, 0, 7],
                                backgroundColor: '#96CEB4',
                                borderColor: '#96CEB4',
                                borderWidth: 0
                            }]
                        },
                        options: {
                            indexAxis: 'y', // 水平条形图
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    display: false
                                },
                                tooltip: {
                                    callbacks: {
                                        label: function(context) {
                                            const label = context.dataset.label;
                                            const value = context.parsed.x;
                                            const ageGroup = context.label;
                                            
                                            // 返回英文详细说明
                                            return getActivityDescription(label, ageGroup, value);
                                        }
                                    }
                                }
                            },
                            scales: {
                                x: {
                                    stacked: true,
                                    beginAtZero: true,
                                    max: 100
                                },
                                y: {
                                    stacked: true
                                }
                            },
                            onClick: function(event, elements) {
                                if (elements.length > 0) {
                                    const element = elements[0];
                                    const datasetIndex = element.datasetIndex;
                                    const dataIndex = element.index;
                                    const dataset = this.data.datasets[datasetIndex];
                                    const label = dataset.label;
                                    const ageGroup = this.data.labels[dataIndex];
                                    const value = dataset.data[dataIndex];
                                    
                                    if (value > 0) {
                                        showActivityDetails(label, ageGroup, value);
                                    }
                                }
                            }
                        }
                    });
                    
                    // 添加鼠标样式
                    ageChartCtx.style.cursor = 'pointer';
                    
                    console.log('✅ 年龄活动图表初始化完成');
                } else {
                    console.error('❌ 未找到年龄活动图表画布');
                }
            }
            
            // 获取活动详细说明（英文）
            function getActivityDescription(activity, ageGroup, value) {
                const descriptions = {
                    'Family & Learning': {
                        '0-2 years': 'Early childhood development focused on family bonding and basic learning skills',
                        '3-5 years': 'Preschool years with family-centered education and fundamental knowledge acquisition',
                        '6-8 years': 'Primary school foundation with family support and structured learning',
                        '10-12 years': 'Middle childhood with family guidance and academic development',
                        '12-14 years': 'Early adolescence with family involvement and educational growth',
                        '15 years': 'Teenage years balancing family support and independent learning',
                        '15-16 years': 'Late adolescence with family backing and advanced learning pursuits'
                    },
                    'Go Strategy': {
                        '6-8 years': 'Introduction to strategic thinking through Go board game',
                        'default': 'Strategic game learning and cognitive development'
                    },
                    'Mineral Interest': {
                        '6-8 years': 'Initial curiosity about minerals and natural sciences',
                        '10-12 years': 'Growing fascination with geology and mineralogy',
                        '12-14 years': 'Continued interest in earth sciences and mineral research',
                        '15-16 years': 'Advanced study of minerals and geological sciences'
                    },
                    'Swimming': {
                        '10-12 years': 'Learning fundamental swimming techniques and water safety',
                        '12-14 years': 'Improving swimming skills and building endurance',
                        '15 years': 'Advanced swimming techniques and competitive training',
                        '15-16 years': 'Mastery of swimming styles and fitness maintenance'
                    },
                    'Guitar': {
                        '10-12 years': 'Beginning guitar lessons and basic chord learning',
                        '12-14 years': 'Intermediate guitar skills and song repertoire building',
                        '15-16 years': 'Advanced guitar techniques and musical expression'
                    },
                    'Robotics & 3D': {
                        '15-16 years': 'Exploring robotics engineering and 3D design technologies'
                    },
                    'UI/UX Design': {
                        '15-16 years': 'Learning user interface and user experience design principles'
                    },
                    'Coding': {
                        '15-16 years': 'Programming fundamentals and software development basics'
                    }
                };
                
                const activityDesc = descriptions[activity];
                if (activityDesc && activityDesc[ageGroup]) {
                    return `${activity}: ${activityDesc[ageGroup]} (${value}%)`;
                } else if (activityDesc && activityDesc.default) {
                    return `${activity}: ${activityDesc.default} (${value}%)`;
                } else {
                    return `${activity}: ${value}%`;
                }
            }
            
            // 显示活动详细信息弹窗
            function showActivityDetails(activity, ageGroup, value) {
                // 移除现有的详情弹窗
                const existingPopup = document.querySelector('.activity-details-popup');
                if (existingPopup) {
                    existingPopup.remove();
                }
                
                const popup = document.createElement('div');
                popup.className = 'activity-details-popup';
                popup.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background: white;
                    border: 2px solid #667eea;
                    border-radius: 16px;
                    padding: 25px;
                    max-width: 500px;
                    width: 90%;
                    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
                    z-index: 10000;
                    opacity: 0;
                    transition: all 0.3s ease;
                    font-family: 'Bree Serif', serif;
                `;
                
                const activityInfo = getActivityInfo(activity, ageGroup, value);
                
                popup.innerHTML = `
                    <div class="popup-header">
                        <h3 style="margin: 0 0 15px 0; color: #667eea; font-size: 24px;">
                            ${activityInfo.icon} ${activity}
                        </h3>
                        <div style="font-size: 18px; color: #666; margin-bottom: 20px;">
                            Age Group: <strong>${ageGroup}</strong> | Percentage: <strong>${value}%</strong>
                        </div>
                    </div>
                    
                    <div class="popup-content">
                        <h4 style="color: #333; margin: 0 0 15px 0; font-size: 18px;">Activity Description</h4>
                        <p style="color: #555; line-height: 1.6; margin: 0 0 20px 0; font-size: 16px;">
                            ${activityInfo.description}
                        </p>
                        
                        <h4 style="color: #333; margin: 0 0 15px 0; font-size: 18px;">Key Skills Developed</h4>
                        <ul style="color: #555; line-height: 1.6; margin: 0 0 20px 0; padding-left: 20px;">
                            ${activityInfo.skills.map(skill => `<li>${skill}</li>`).join('')}
                        </ul>
                        
                        <h4 style="color: #333; margin: 0 0 15px 0; font-size: 18px;">Impact on Development</h4>
                        <p style="color: #555; line-height: 1.6; margin: 0; font-size: 16px;">
                            ${activityInfo.impact}
                        </p>
                    </div>
                    
                    <div class="popup-footer" style="text-align: center; margin-top: 25px;">
                        <button onclick="this.parentElement.parentElement.remove()" 
                                style="background: #667eea; color: white; border: none; padding: 10px 25px; 
                                       border-radius: 8px; cursor: pointer; font-size: 16px; transition: all 0.3s ease;">
                            Close
                        </button>
                    </div>
                `;
                
                document.body.appendChild(popup);
                
                // 显示动画
                setTimeout(() => {
                    popup.style.opacity = '1';
                }, 10);
                
                // 点击外部关闭
                popup.addEventListener('click', function(e) {
                    if (e.target === popup) {
                        popup.remove();
                    }
                });
            }
            
            // 获取活动详细信息
            function getActivityInfo(activity, ageGroup, value) {
                const activityData = {
                    'Family & Learning': {
                        icon: '👨‍👩‍👧‍👦',
                        description: 'This activity represents the foundational learning experiences that occur within the family environment, including basic education, moral values, and life skills development.',
                        skills: ['Social interaction', 'Basic literacy', 'Moral reasoning', 'Life skills', 'Emotional intelligence'],
                        impact: 'Family & Learning provides the essential foundation for all other developmental areas, creating a secure base for future growth and learning.'
                    },
                    'Go Strategy': {
                        icon: '🎯',
                        description: 'Go Strategy involves learning and practicing the ancient board game Go, which develops strategic thinking, planning, and analytical skills.',
                        skills: ['Strategic planning', 'Critical thinking', 'Patience', 'Analytical reasoning', 'Decision making'],
                        impact: 'Go Strategy enhances cognitive abilities and teaches valuable life lessons about planning, patience, and strategic thinking.'
                    },
                    'Mineral Interest': {
                        icon: '💎',
                        description: 'Mineral Interest represents the fascination with geology, mineralogy, and earth sciences, fostering scientific curiosity and research skills.',
                        skills: ['Scientific observation', 'Research methodology', 'Classification skills', 'Natural curiosity', 'Analytical thinking'],
                        impact: 'Mineral Interest develops scientific thinking and research skills, potentially leading to future careers in geology or related sciences.'
                    },
                    'Swimming': {
                        icon: '🏊‍♂️',
                        description: 'Swimming activities focus on water safety, physical fitness, and competitive swimming techniques, promoting both health and athletic development.',
                        skills: ['Water safety', 'Physical coordination', 'Endurance building', 'Competitive spirit', 'Discipline'],
                        impact: 'Swimming improves physical fitness, builds confidence, and develops important life-saving water safety skills.'
                    },
                    'Guitar': {
                        icon: '🎸',
                        description: 'Guitar learning involves musical education, instrument mastery, and artistic expression, developing both technical and creative abilities.',
                        skills: ['Musical theory', 'Fine motor skills', 'Creative expression', 'Performance confidence', 'Rhythm and timing'],
                        impact: 'Guitar playing enhances creativity, improves coordination, and provides a lifelong source of artistic expression and stress relief.'
                    },
                    'Robotics & 3D': {
                        icon: '🤖',
                        description: 'Robotics & 3D activities involve engineering principles, programming, and design thinking, preparing for future technology careers.',
                        skills: ['Engineering principles', 'Programming logic', '3D design', 'Problem solving', 'Innovation'],
                        impact: 'Robotics & 3D skills are essential for future careers in technology and engineering, fostering innovation and problem-solving abilities.'
                    },
                    'UI/UX Design': {
                        icon: '🎨',
                        description: 'UI/UX Design focuses on user interface and user experience design principles, combining creativity with technical understanding.',
                        skills: ['Design thinking', 'User empathy', 'Visual communication', 'Prototyping', 'User research'],
                        impact: 'UI/UX Design skills are crucial in today\'s digital world, opening doors to careers in design, technology, and product development.'
                    },
                    'Coding': {
                        icon: '💻',
                        description: 'Coding activities involve learning programming languages and software development, developing logical thinking and problem-solving skills.',
                        skills: ['Logical thinking', 'Problem solving', 'Algorithm design', 'Debugging', 'Software development'],
                        impact: 'Coding skills are fundamental in the digital age, providing opportunities in technology, science, and various other fields requiring analytical thinking.'
                    }
                };
                
                return activityData[activity] || {
                    icon: '📚',
                    description: 'This activity contributes to personal development and skill building during this age period.',
                    skills: ['Skill development', 'Personal growth', 'Learning', 'Experience building'],
                    impact: 'This activity plays an important role in overall development and future success.'
                };
            }
            
            // 延迟初始化图表，确保DOM完全加载
            setTimeout(() => {
                initCharts();
            }, 500);
            
            // 延迟初始化 Aceternity Timeline
            setTimeout(() => {
                initAceternityTimeline();
            }, 800);
            
            // 世界地图实现 - 使用 Leaflet 真实地图
            function initWorldMap() {
                console.log('🗺️ 初始化真实世界地图...');
                
                const mapContainer = document.getElementById('worldMapCanvas');
                const svg = document.getElementById('connectionLines');
                const markers = document.getElementById('cityMarkers');
                
                if (!mapContainer || !svg || !markers) {
                    console.error('地图元素未找到:', {
                        mapContainer: !!mapContainer,
                        svg: !!svg,
                        markers: !!markers
                    });
                    return;
                }
                
                // 清空原有内容
                mapContainer.innerHTML = '';
                svg.innerHTML = '';
                markers.innerHTML = '';
                
                // 设置地图容器样式
                mapContainer.style.width = '100%';
                mapContainer.style.height = '400px';
                mapContainer.style.minHeight = '400px';
                mapContainer.style.position = 'relative';
                mapContainer.style.zIndex = '1';
                
                console.log('📍 地图容器准备完成');
                
                // 旅行路线数据 - 根据实际旅行经历更新
                const travelRoutes = [
                    // 国内旅行
                    { start: { lat: 30.67, lng: 104.06, label: 'Chengdu', country: 'China' }, end: { lat: 39.90, lng: 116.41, label: 'Beijing', country: 'China' }, type: 'domestic' },
                    { start: { lat: 30.67, lng: 104.06, label: 'Chengdu', country: 'China' }, end: { lat: 34.26, lng: 108.94, label: 'Xi\'an', country: 'China' }, type: 'domestic' },
                    { start: { lat: 30.67, lng: 104.06, label: 'Chengdu', country: 'China' }, end: { lat: 22.32, lng: 114.17, label: 'Hong Kong', country: 'China' }, type: 'domestic' },
                    { start: { lat: 30.67, lng: 104.06, label: 'Chengdu', country: 'China' }, end: { lat: 22.20, lng: 113.54, label: 'Macau', country: 'China' }, type: 'domestic' },
                    { start: { lat: 30.67, lng: 104.06, label: 'Chengdu', country: 'China' }, end: { lat: 25.05, lng: 102.73, label: 'Kunming', country: 'China' }, type: 'domestic' },
                    { start: { lat: 30.67, lng: 104.06, label: 'Chengdu', country: 'China' }, end: { lat: 26.65, lng: 106.63, label: 'Guiyang', country: 'China' }, type: 'domestic' },
                    
                    // 国际旅行
                    { start: { lat: 30.67, lng: 104.06, label: 'Chengdu', country: 'China' }, end: { lat: 13.76, lng: 100.50, label: 'Bangkok', country: 'Thailand' }, type: 'international' },
                    { start: { lat: 30.67, lng: 104.06, label: 'Chengdu', country: 'China' }, end: { lat: 25.03, lng: 121.57, label: 'Taipei', country: 'Taiwan' }, type: 'international' },
                    { start: { lat: 30.67, lng: 104.06, label: 'Chengdu', country: 'China' }, end: { lat: 1.35, lng: 103.82, label: 'Singapore', country: 'Singapore' }, type: 'international' },
                    { start: { lat: 30.67, lng: 104.06, label: 'Chengdu', country: 'China' }, end: { lat: 3.14, lng: 101.69, label: 'Kuala Lumpur', country: 'Malaysia' }, type: 'international' },
                    { start: { lat: 30.67, lng: 104.06, label: 'Chengdu', country: 'China' }, end: { lat: 25.20, lng: 55.27, label: 'Dubai', country: 'UAE' }, type: 'international' },
                    { start: { lat: 30.67, lng: 104.06, label: 'Chengdu', country: 'China' }, end: { lat: 33.75, lng: -84.39, label: 'Atlanta', country: 'USA' }, type: 'international' }
                ];
                
                // 创建 Leaflet 地图
                const map = L.map(mapContainer, {
                    center: [25, 0], // 调整中心位置，更好地显示全球
                    zoom: 2, // 降低缩放级别，显示更多世界地图
                    zoomControl: false, // 禁用默认缩放控件
                    attributionControl: false, // 禁用默认属性控件
                    dragging: true,
                    touchZoom: true,
                    scrollWheelZoom: false, // 禁用滚轮缩放
                    doubleClickZoom: false,
                    boxZoom: false,
                    keyboard: false,
                    tap: false,
                    maxBounds: [[-90, -180], [90, 180]], // 限制地图边界
                    maxBoundsViscosity: 1.0 // 边界粘性
                });
                
                // 添加深色主题的 OpenStreetMap 瓦片
                const darkTileLayer = L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
                    attribution: '©OpenStreetMap contributors ©CARTO',
                    subdomains: 'abcd',
                    maxZoom: 19
                });
                
                darkTileLayer.addTo(map);
                
                // 添加缩放控件
                L.control.zoom({
                    position: 'bottomright',
                    zoomInTitle: '放大',
                    zoomOutTitle: '缩小'
                }).addTo(map);
                
                // 隐藏默认缩放控件
                setTimeout(() => {
                    const defaultZoomControl = document.querySelector('.leaflet-control-zoom');
                    if (defaultZoomControl) {
                        defaultZoomControl.style.display = 'none';
                    }
                }, 100);
                
                // 添加手动缩放按键
                const manualZoomControl = L.Control.extend({
                    options: {
                        position: 'bottomleft'
                    },
                    
                    onAdd: function(map) {
                        console.log('🔧 开始创建手动缩放控件...');
                        
                        const container = L.DomUtil.create('div', 'manual-zoom-control');
                        container.style.cssText = `
                            position: absolute;
                            z-index: 1000;
                            margin: 10px;
                            pointer-events: auto;
                        `;
                        
                        container.innerHTML = `
                            <div style="
                                background: rgba(15, 23, 42, 0.95); 
                                color: white; 
                                border-radius: 8px; 
                                overflow: hidden; 
                                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
                                border: 1px solid rgba(14, 165, 233, 0.5);
                                display: block;
                                position: relative;
                                z-index: 1001;
                            ">
                                <button id="zoomInBtn" style="
                                    display: block; 
                                    width: 40px; 
                                    height: 40px; 
                                    background: linear-gradient(135deg, #0ea5e9, #3b82f6); 
                                    color: white; 
                                    border: none; 
                                    font-size: 18px; 
                                    font-weight: bold; 
                                    cursor: pointer; 
                                    transition: all 0.3s ease;
                                    outline: none;
                                ">+</button>
                                <button id="zoomOutBtn" style="
                                    display: block; 
                                    width: 40px; 
                                    height: 40px; 
                                    background: linear-gradient(135deg, #0ea5e9, #3b82f6); 
                                    color: white; 
                                    border: none; 
                                    font-size: 18px; 
                                    font-weight: bold; 
                                    cursor: pointer; 
                                    transition: all 0.3s ease;
                                    outline: none;
                                ">−</button>
                            </div>
                        `;
                        
                        console.log('🔧 手动缩放控件HTML已创建');
                        
                        // 添加放大功能
                        const zoomInBtn = container.querySelector('#zoomInBtn');
                        if (zoomInBtn) {
                            zoomInBtn.addEventListener('click', () => {
                                console.log('🔍 点击放大按钮');
                                map.zoomIn();
                            });
                            
                            // 添加悬停效果
                            zoomInBtn.addEventListener('mouseenter', () => {
                                zoomInBtn.style.transform = 'scale(1.1)';
                                zoomInBtn.style.background = 'linear-gradient(135deg, #0284c7, #2563eb)';
                            });
                            zoomInBtn.addEventListener('mouseleave', () => {
                                zoomInBtn.style.transform = 'scale(1)';
                                zoomInBtn.style.background = 'linear-gradient(135deg, #0ea5e9, #3b82f6)';
                            });
                        } else {
                            console.error('❌ 放大按钮未找到');
                        }
                        
                        // 添加缩小功能
                        const zoomOutBtn = container.querySelector('#zoomOutBtn');
                        if (zoomOutBtn) {
                            zoomOutBtn.addEventListener('click', () => {
                                console.log('🔍 点击缩小按钮');
                                map.zoomOut();
                            });
                            
                            // 添加悬停效果
                            zoomOutBtn.addEventListener('mouseenter', () => {
                                zoomOutBtn.style.transform = 'scale(1.1)';
                                zoomOutBtn.style.background = 'linear-gradient(135deg, #0284c7, #2563eb)';
                            });
                            zoomOutBtn.addEventListener('mouseleave', () => {
                                zoomOutBtn.style.transform = 'scale(1)';
                                zoomOutBtn.style.background = 'linear-gradient(135deg, #0ea5e9, #3b82f6)';
                            });
                        } else {
                            console.error('❌ 缩小按钮未找到');
                        }
                        
                        console.log('✅ 手动缩放控件创建完成');
                        return container;
                    }
                });
                
                // 强制添加手动缩放控件
                const manualControl = new manualZoomControl();
                map.addControl(manualControl);
                
                // 直接在地图容器中添加缩放按钮（备用方案）
                setTimeout(() => {
                    console.log('🔧 添加备用缩放按钮到地图容器...');
                    const mapContainer = document.getElementById('worldMapCanvas');
                    if (mapContainer) {
                        // 创建备用缩放控件容器
                        const backupContainer = document.createElement('div');
                        backupContainer.id = 'backupZoomControls';
                        backupContainer.style.cssText = `
                            position: absolute;
                            bottom: 20px;
                            left: 20px;
                            z-index: 1000;
                            display: block;
                            pointer-events: auto;
                        `;
                        
                        backupContainer.innerHTML = `
                            <div style="
                                background: rgba(15, 23, 42, 0.95); 
                                color: white; 
                                border-radius: 8px; 
                                overflow: hidden; 
                                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3), 0 0 15px rgba(14, 165, 233, 0.3);
                                border: 1px solid rgba(14, 165, 233, 0.6);
                                position: relative;
                            ">
                                <div style="
                                    position: absolute;
                                    top: 0;
                                    left: 0;
                                    right: 0;
                                    height: 1px;
                                    background: linear-gradient(90deg, transparent, #0ea5e9, transparent);
                                    animation: scan 3s linear infinite;
                                "></div>
                                <button id="backupZoomInBtn" style="
                                    display: block; 
                                    width: 40px; 
                                    height: 40px; 
                                    background: linear-gradient(135deg, #0ea5e9, #3b82f6); 
                                    color: white; 
                                    border: none; 
                                    font-size: 18px; 
                                    font-weight: bold; 
                                    cursor: pointer; 
                                    transition: all 0.3s ease;
                                    outline: none;
                                    position: relative;
                                    overflow: hidden;
                                ">+</button>
                                <button id="backupZoomOutBtn" style="
                                    display: block; 
                                    width: 40px; 
                                    height: 40px; 
                                    background: linear-gradient(135deg, #0ea5e9, #3b82f6); 
                                    color: white; 
                                    border: none; 
                                    font-size: 18px; 
                                    font-weight: bold; 
                                    cursor: pointer; 
                                    transition: all 0.3s ease;
                                    outline: none;
                                    position: relative;
                                    overflow: hidden;
                                ">−</button>
                            </div>
                        `;
                        
                        // 添加到地图容器
                        mapContainer.appendChild(backupContainer);
                        console.log('✅ 备用缩放按钮已添加到地图容器');
                        
                        // 添加功能
                        const backupZoomInBtn = document.getElementById('backupZoomInBtn');
                        const backupZoomOutBtn = document.getElementById('backupZoomOutBtn');
                        
                        if (backupZoomInBtn) {
                            backupZoomInBtn.addEventListener('click', () => {
                                console.log('🔍 点击备用放大按钮');
                                map.zoomIn();
                            });
                            
                            backupZoomInBtn.addEventListener('mouseenter', () => {
                                backupZoomInBtn.style.transform = 'scale(1.1)';
                                backupZoomInBtn.style.background = 'linear-gradient(135deg, #0284c7, #2563eb)';
                            });
                            backupZoomInBtn.addEventListener('mouseleave', () => {
                                backupZoomInBtn.style.transform = 'scale(1)';
                                backupZoomInBtn.style.background = 'linear-gradient(135deg, #0ea5e9, #3b82f6)';
                            });
                        }
                        
                        if (backupZoomOutBtn) {
                            backupZoomOutBtn.addEventListener('click', () => {
                                console.log('🔍 点击备用缩小按钮');
                                map.zoomOut();
                            });
                            
                            backupZoomOutBtn.addEventListener('mouseenter', () => {
                                backupZoomOutBtn.style.transform = 'scale(1.1)';
                                backupZoomOutBtn.style.background = 'linear-gradient(135deg, #0284c7, #2563eb)';
                            });
                            backupZoomOutBtn.addEventListener('mouseleave', () => {
                                backupZoomOutBtn.style.transform = 'scale(1)';
                                backupZoomOutBtn.style.background = 'linear-gradient(135deg, #0ea5e9, #3b82f6)';
                            });
                        }
                    }
                }, 500);
                
                // 地图加载完成后，调整视图以显示所有标记点
                map.whenReady(() => {
                    // 计算所有城市的边界
                    const allCities = [];
                    travelRoutes.forEach(route => {
                        allCities.push([route.start.lat, route.start.lng]);
                        allCities.push([route.end.lat, route.end.lng]);
                    });
                    
                    // 确保地图能显示所有城市
                    const bounds = L.latLngBounds(allCities);
                    map.fitBounds(bounds, { 
                        padding: [50, 50], // 添加边距
                        maxZoom: 4 // 限制最大缩放级别
                    });
                });
                
                console.log('🗺️ Leaflet 地图创建完成');
                
                // 创建连接线
                function createConnectionLines() {
                    console.log('🔗 开始创建连接线...');
                    
                    travelRoutes.forEach((route, i) => {
                        // 创建曲线路径
                        const startPoint = [route.start.lat, route.start.lng];
                        const endPoint = [route.end.lat, route.end.lng];
                        
                        // 计算中间控制点（创建弧形效果）
                        const midLat = (startPoint[0] + endPoint[0]) / 2;
                        const midLng = (startPoint[1] + endPoint[1]) / 2;
                        
                        // 根据航线类型调整弯曲程度
                        const baseOffset = route.type === 'international' ? 45 : 25; // 国际航线弯曲更大
                        const offset = baseOffset + Math.random() * 10; // 添加随机变化
                        
                        // 创建弧形路径
                        const curvePoints = [];
                        const steps = 80; // 增加步数，让曲线更平滑
                        
                        for (let j = 0; j <= steps; j++) {
                            const t = j / steps;
                            const lat = startPoint[0] + (endPoint[0] - startPoint[0]) * t;
                            const lng = startPoint[1] + (endPoint[1] - startPoint[1]) * t;
                            
                            // 添加弧形偏移 - 使用正弦函数创建更自然的曲线
                            const curveOffset = Math.sin(Math.PI * t) * offset;
                            const curveLat = lat + curveOffset * 0.015; // 增加垂直偏移
                            
                            // 添加水平方向的轻微弯曲
                            const horizontalCurve = Math.sin(Math.PI * t) * (route.type === 'international' ? 20 : 12);
                            const curveLng = lng + horizontalCurve * 0.01;
                            
                            // 添加额外的弯曲变化，让每条航线更独特
                            const extraCurve = Math.sin(Math.PI * t * 2) * (route.type === 'international' ? 12 : 6);
                            const finalLat = curveLat + extraCurve * 0.005;
                            
                            curvePoints.push([finalLat, curveLng]);
                        }
                        
                        // 创建路径
                        const path = L.polyline(curvePoints, {
                            color: '#0ea5e9', // 蓝色荧光线
                            weight: 2, // 主线条
                            opacity: 0,
                            dashArray: '8, 8', // 虚线效果
                            lineCap: 'round',
                            lineJoin: 'round'
                        });
                        
                        // 添加发光效果
                        const glowPath = L.polyline(curvePoints, {
                            color: '#0ea5e9', // 蓝色荧光
                            weight: 6, // 中等发光
                            opacity: 0,
                            fill: false
                        });
                        
                        // 添加更强的发光效果
                        const strongGlowPath = L.polyline(curvePoints, {
                            color: '#0ea5e9',
                            weight: 10, // 强发光
                            opacity: 0,
                            fill: false
                        });
                        
                        // 添加最外层发光效果
                        const outerGlowPath = L.polyline(curvePoints, {
                            color: '#0ea5e9',
                            weight: 16, // 最外层发光
                            opacity: 0,
                            fill: false
                        });
                        
                        outerGlowPath.addTo(map);
                        strongGlowPath.addTo(map);
                        glowPath.addTo(map);
                        path.addTo(map);
                        
                        // 延迟显示动画
                        setTimeout(() => {
                            path.setStyle({ opacity: 1 });
                            glowPath.setStyle({ opacity: 0.6 });
                            strongGlowPath.setStyle({ opacity: 0.4 });
                            outerGlowPath.setStyle({ opacity: 0.2 });
                            
                            // 虚线动画 - 模拟飞机移动
                            let dashOffset = 20;
                            const animateDash = () => {
                                dashOffset -= 1.2; // 更快的虚线动画
                                if (dashOffset < 0) dashOffset = 20;
                                path.setStyle({ dashOffset: dashOffset });
                                requestAnimationFrame(animateDash);
                            };
                            animateDash();
                            
                            // 荧光呼吸效果
                            let glowOpacity = 0.2;
                            let glowDirection = 1;
                            const animateGlow = () => {
                                glowOpacity += 0.03 * glowDirection;
                                if (glowOpacity >= 0.6) glowDirection = -1;
                                if (glowOpacity <= 0.1) glowDirection = 1;
                                
                                strongGlowPath.setStyle({ opacity: glowOpacity });
                                outerGlowPath.setStyle({ opacity: glowOpacity * 0.5 });
                                requestAnimationFrame(animateGlow);
                            };
                            animateGlow();
                            
                            // 添加脉冲效果
                            let pulseOpacity = 0.4;
                            let pulseDirection = 1;
                            const animatePulse = () => {
                                pulseOpacity += 0.02 * pulseDirection;
                                if (pulseOpacity >= 0.8) pulseDirection = -1;
                                if (pulseOpacity <= 0.2) pulseDirection = 1;
                                
                                glowPath.setStyle({ opacity: pulseOpacity });
                                requestAnimationFrame(animatePulse);
                            };
                            animatePulse();
                            
                        }, i * 400); // 调整延迟，创造波浪效果
                        
                        console.log(`🔗 连接线 ${i + 1}: ${route.start.label} -> ${route.end.label} (${route.type})`);
                    });
                }
                
                // 创建城市标记
                function createCityMarkers() {
                    console.log('📍 开始创建城市标记...');
                    
                    const allCities = new Set();
                    travelRoutes.forEach(route => {
                        allCities.add(route.start);
                        allCities.add(route.end);
                    });
                    
                    Array.from(allCities).forEach((city, i) => {
                        // 创建城市标记
                        const marker = L.circleMarker([city.lat, city.lng], {
                            radius: city.label === 'Chengdu' ? 12 : 8,
                            fillColor: city.label === 'Chengdu' ? '#f59e0b' : '#0ea5e9', // 成都保持金色，其他城市用蓝色
                            color: '#ffffff',
                            weight: city.label === 'Chengdu' ? 3 : 2,
                            opacity: 1,
                            fillOpacity: 0.8
                        });
                        
                        // 添加脉冲动画
                        marker.setStyle({ opacity: 0 });
                        marker.addTo(map);
                        
                        // 为蓝色城市标记添加荧光效果
                        if (city.label !== 'Chengdu') {
                            // 创建荧光光环
                            const glowMarker = L.circleMarker([city.lat, city.lng], {
                                radius: city.label === 'Chengdu' ? 16 : 12,
                                fillColor: 'transparent',
                                color: '#0ea5e9',
                                weight: 2,
                                opacity: 0,
                                fillOpacity: 0
                            });
                            
                            glowMarker.addTo(map);
                            
                            // 荧光动画
                            let glowRadius = city.label === 'Chengdu' ? 16 : 12;
                            let glowDirection = 1;
                            const animateGlowMarker = () => {
                                glowRadius += 0.5 * glowDirection;
                                if (glowRadius >= (city.label === 'Chengdu' ? 20 : 16)) glowDirection = -1;
                                if (glowRadius <= (city.label === 'Chengdu' ? 16 : 12)) glowDirection = 1;
                                
                                glowMarker.setStyle({ 
                                    radius: glowRadius,
                                    opacity: 0.6 - (glowRadius - (city.label === 'Chengdu' ? 16 : 12)) * 0.1
                                });
                                requestAnimationFrame(animateGlowMarker);
                            };
                            animateGlowMarker();
                        }
                        
                        // 创建城市标签
                        const popup = L.popup({
                            className: 'city-popup',
                            closeButton: false,
                            autoClose: false,
                            closeOnClick: false
                        }).setContent(`
                            <div style="text-align: center; font-family: Arial, sans-serif;">
                                <div style="font-weight: bold; font-size: 14px; margin-bottom: 4px; color: ${city.label === 'Chengdu' ? '#f59e0b' : '#0ea5e9'};">${city.label}</div>
                                <div style="font-size: 11px; opacity: 0.8;">${city.country}</div>
                            </div>
                        `);
                        
                        // 悬停效果
                        marker.on('mouseover', function() {
                            this.setStyle({ 
                                radius: city.label === 'Chengdu' ? 16 : 12,
                                fillOpacity: 1,
                                weight: city.label === 'Chengdu' ? 4 : 3
                            });
                            popup.setLatLng([city.lat, city.lng]).openOn(map);
                        });
                        
                        marker.on('mouseout', function() {
                            this.setStyle({ 
                                radius: city.label === 'Chengdu' ? 12 : 8,
                                fillOpacity: 0.8,
                                weight: city.label === 'Chengdu' ? 3 : 2
                            });
                            map.closePopup(popup);
                        });
                        
                        // 延迟显示
                        setTimeout(() => {
                            marker.setStyle({ opacity: 1 });
                        }, i * 300);
                        
                        console.log(`📍 城市标记: ${city.label} at (${city.lat}, ${city.lng})`);
                    });
                }
                
                // 添加自定义地图控件
                const customControl = L.Control.extend({
                    options: {
                        position: 'topright'
                    },
                    
                    onAdd: function(map) {
                        const container = L.DomUtil.create('div', 'custom-map-control');
                        container.innerHTML = `
                            <div style="
                                background: rgba(15, 23, 42, 0.95); 
                                color: white; 
                                padding: 15px; 
                                border-radius: 12px; 
                                font-family: Arial, sans-serif; 
                                font-size: 12px; 
                                backdrop-filter: blur(20px); 
                                border: 1px solid rgba(14, 165, 233, 0.6); 
                                box-shadow: 0 10px 40px rgba(14, 165, 233, 0.4), 0 0 20px rgba(14, 165, 233, 0.2);
                                position: relative;
                                overflow: hidden;
                            ">
                                <div style="
                                    position: absolute;
                                    top: 0;
                                    left: 0;
                                    right: 0;
                                    height: 2px;
                                    background: linear-gradient(90deg, transparent, #0ea5e9, transparent);
                                    animation: scan 2s linear infinite;
                                "></div>
                                <div style="font-weight: bold; margin-bottom: 8px; color: #0ea5e9; font-size: 13px;">Global Connectivity</div>
                                <div style="opacity: 0.9; margin-bottom: 6px;">12 Routes • 13 Cities</div>
                                <div style="font-size: 10px; opacity: 0.7; margin-bottom: 8px;">6 Domestic • 6 International</div>
                                <button id="resetViewBtn" style="
                                    background: linear-gradient(135deg, #0ea5e9, #3b82f6); 
                                    color: white; 
                                    border: none; 
                                    padding: 6px 12px; 
                                    border-radius: 6px; 
                                    font-size: 10px; 
                                    cursor: pointer; 
                                    transition: all 0.3s ease; 
                                    width: 100%;
                                    position: relative;
                                    overflow: hidden;
                                ">Reset View</button>
                            </div>
                        `;
                        
                        // 添加重置视图功能
                        const resetBtn = container.querySelector('#resetViewBtn');
                        resetBtn.addEventListener('click', () => {
                            const allCities = [];
                            travelRoutes.forEach(route => {
                                allCities.push([route.start.lat, route.start.lng]);
                                allCities.push([route.end.lat, route.end.lng]);
                            });
                            
                            const bounds = L.latLngBounds(allCities);
                            map.fitBounds(bounds, { 
                                padding: [50, 50],
                                maxZoom: 4
                            });
                        });
                        
                        return container;
                    }
                });
                
                map.addControl(new customControl());
                
                // 添加动画样式
                if (!document.getElementById('mapStyles')) {
                    const style = document.createElement('style');
                    style.id = 'mapStyles';
                    style.textContent = `
                        .custom-map-control {
                            margin: 10px;
                        }
                        
                        .manual-zoom-control {
                            margin: 10px;
                        }
                        
                        .manual-zoom-control button:hover {
                            background: linear-gradient(135deg, #0284c7, #2563eb) !important;
                        }
                        
                        /* 强制显示手动缩放控件 */
                        .manual-zoom-control {
                            display: block !important;
                            visibility: visible !important;
                            opacity: 1 !important;
                            position: absolute !important;
                            z-index: 1000 !important;
                            pointer-events: auto !important;
                        }
                        
                        .manual-zoom-control button {
                            display: block !important;
                            visibility: visible !important;
                            opacity: 1 !important;
                        }
                        
                        /* 备用缩放控件样式 */
                        #backupZoomControls {
                            display: block !important;
                            visibility: visible !important;
                            opacity: 1 !important;
                        }
                        
                        /* 扫描动画 */
                        @keyframes scan {
                            0% { transform: translateX(-100%); }
                            100% { transform: translateX(100%); }
                        }
                        
                        /* 地图控件悬停效果 */
                        .custom-map-control button:hover {
                            background: linear-gradient(135deg, #0284c7, #2563eb) !important;
                            transform: translateY(-1px);
                            box-shadow: 0 4px 15px rgba(14, 165, 233, 0.4);
                        }
                        
                        .city-popup .leaflet-popup-content-wrapper {
                            background: rgba(15, 23, 42, 0.95);
                            color: white;
                            border: 1px solid rgba(59, 130, 246, 0.3);
                            border-radius: 8px;
                            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
                        }
                        
                        .city-popup .leaflet-popup-tip {
                            background: rgba(15, 23, 42, 0.95);
                            border: 1px solid rgba(59, 130, 246, 0.3);
                        }
                        
                        .leaflet-container {
                            background: #0f172a;
                        }
                        
                        .leaflet-control-attribution {
                            display: none;
                        }
                        
                        .leaflet-control-zoom {
                            display: none !important;
                        }
                    `;
                    document.head.appendChild(style);
                }
                
                // 初始化地图元素
                setTimeout(() => {
                    createConnectionLines();
                    setTimeout(() => {
                        createCityMarkers();
                        
                        // 测试手动缩放控件
                        console.log('🧪 测试手动缩放控件...');
                        const manualControlElement = document.querySelector('.manual-zoom-control');
                        const backupControls = document.getElementById('backupZoomControls');
                        
                        if (manualControlElement) {
                            console.log('✅ Leaflet 手动缩放控件正常');
                        } else if (backupControls) {
                            console.log('✅ 备用缩放控件正常');
                            backupControls.style.display = 'block';
                        } else {
                            console.error('❌ 所有缩放控件都未找到');
                        }
                        
                    }, 1000);
                }, 1500);
                
                console.log('✅ 真实世界地图初始化完成');
            }
        
        // 初始化时间线特效
        function initTimelineEffects() {
            console.log('🎯 初始化时间线特效...');
            
            const timelineItems = document.querySelectorAll('.timeline-item');
            timelineItems.forEach((item, index) => {
                // 添加点击展开效果
                item.addEventListener('click', function() {
                    const details = this.querySelector('.timeline-details');
                    if (details) {
                        details.style.display = details.style.display === 'none' ? 'flex' : 'none';
                    }
                });
                
                // 添加悬停效果
                item.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateX(10px)';
                });
                
                item.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateX(0)';
                });
            });
            
            console.log('✅ 时间线特效初始化完成');
        }
        
        // 初始化 Aceternity UI Timeline 滚动进度条
        function initAceternityTimeline() {
            console.log('🎯 初始化 Aceternity UI Timeline...');
            
            const timelineContainer = document.querySelector('.aceternity-timeline-container');
            const progressBeam = document.querySelector('.timeline-progress-beam');
            
            if (!timelineContainer || !progressBeam) {
                console.log('⚠️ 未找到 Aceternity Timeline 元素');
                return;
            }
            
            // 获取时间线容器的高度
            const containerHeight = timelineContainer.offsetHeight;
            const windowHeight = window.innerHeight;
            
            // 监听滚动事件
            window.addEventListener('scroll', () => {
                const scrollTop = window.pageYOffset;
                const containerTop = timelineContainer.offsetTop;
                const containerBottom = containerTop + containerHeight;
                
                // 计算滚动进度
                if (scrollTop >= containerTop && scrollTop <= containerBottom) {
                    const progress = (scrollTop - containerTop) / (containerHeight - windowHeight);
                    const clampedProgress = Math.max(0, Math.min(1, progress));
                    
                    // 更新进度条高度
                    progressBeam.style.height = `${clampedProgress * 100}%`;
                    
                    // 添加发光效果
                    if (clampedProgress > 0.5) {
                        progressBeam.style.boxShadow = '0 0 20px rgba(102, 126, 234, 0.5)';
                    } else {
                        progressBeam.style.boxShadow = 'none';
                    }
                }
            });
            
            // 添加滚动触发的动画
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };
            
            const timelineObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            }, observerOptions);
            
            // 观察所有时间线条目
            const timelineEntries = document.querySelectorAll('.timeline-entry');
            timelineEntries.forEach(entry => {
                timelineObserver.observe(entry);
            });
            
            console.log('✅ Aceternity UI Timeline 初始化完成');
        }
        
        // 页面加载完成后的初始化
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🚀 页面加载完成，开始初始化...');
            
            // 延迟初始化，确保DOM完全加载
            setTimeout(function() {
                console.log('⏰ 延迟1秒后开始初始化...');
                
                // 初始化音乐播放器
                const genreButtons = document.querySelectorAll('.genre-button');
                if (genreButtons.length > 0) {
                    initVinylMusicPlayer();
                }
                
                // 初始化旅行详情按钮
                const travelButton = document.querySelector('.stats-button');
                if (travelButton) {
                    initTravelDetailsButton();
                }
                
                // 初始化地图
                console.log('🗺️ 开始初始化地图...');
                
            }, 1000);
        });

        // Vinyl Music Player - 简化版本，直接使用原生控件
        function initVinylMusicPlayer() {
            console.log('🎵 开始初始化 Vinyl Music Player...');
            
            // 获取播放器元素
            const audio = document.getElementById('vinylAudio');
            const trackTitle = document.getElementById('trackTitle');
            const trackArtist = document.getElementById('trackArtist');
            
            // 检查元素是否存在
            if (!audio) {
                console.error('❌ 找不到音频元素');
                return;
            }
            
            console.log('✅ 找到播放器元素:', {
                audio: !!audio,
                trackTitle: !!trackTitle,
                trackArtist: !!trackArtist
            });
            
            // 设置歌曲信息
            if (trackTitle) trackTitle.textContent = '🎵 Wish You Were Here';
            if (trackArtist) trackArtist.textContent = 'Pink Floyd';
            
            // 确保音频元素可见且有控件
            audio.style.display = 'block';
            audio.controls = true;
            audio.style.width = '100%';
            audio.style.marginBottom = '20px';
            
            console.log('🎵 主播放器已设置为原生控件模式，应该可以正常播放了！');
            console.log('🎵 Vinyl Music Player 初始化完成！');
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Bree+Serif:wght@400&display=swap" rel="stylesheet">
</head>
<body>
    <!-- 主内容区 -->
    <main class="main-content">
        <!-- 内容卡片区域 -->
        <div class="content-grid">
            <!-- Time 卡片 -->
            <div class="card time-card">
                <h2 class="card-title">My Life Journey</h2>
                <p class="card-subtitle">A visual story of how I've spent my time growing up. Learning has always been my passion - I'm curious about everything!</p>
                
                <!-- 主要时间轴 -->
                <div class="main-timeline">
                    <div class="timeline-milestone" data-age="2">
                        <div class="milestone-dot"></div>
                        <div class="milestone-label">Kindergarten</div>
                        <div class="milestone-age">Age 2</div>
                    </div>
                    <div class="timeline-milestone" data-age="6">
                        <div class="milestone-dot"></div>
                        <div class="milestone-label">Elementary</div>
                        <div class="milestone-age">Age 6</div>
                    </div>
                    <div class="timeline-milestone" data-age="12">
                        <div class="milestone-dot"></div>
                        <div class="milestone-label">Middle School</div>
                        <div class="milestone-age">Age 12</div>
                    </div>
                    <div class="timeline-milestone" data-age="14">
                        <div class="milestone-dot"></div>
                        <div class="milestone-label">High School Exam</div>
                        <div class="milestone-age">Age 14</div>
                    </div>
                    <div class="timeline-milestone" data-age="15">
                        <div class="milestone-dot"></div>
                        <div class="milestone-label">USA</div>
                        <div class="milestone-age">Age 15</div>
                    </div>
                </div>

                <!-- 活动卡片网格 -->
                <div class="activities-grid">
                    <!-- 学习卡片 -->
                    <div class="activity-card study-card" data-category="study">
                        <div class="activity-icon">🚀</div>
                        <div class="activity-title">Learning Journey</div>
                        <div class="activity-subtitle">My lifelong passion</div>
                        <div class="activity-timeline">
                            <div class="timeline-bar" style="width: 100%; background: linear-gradient(90deg, #4A90E2, #667eea);"></div>
                            <span class="timeline-text">Age 2-16 (14 years)</span>
                        </div>
                        <div class="activity-stats">
                            <div class="stat-item">
                                <span class="stat-value">90%</span>
                                <span class="stat-label">Kindergarten</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value">70%</span>
                                <span class="stat-label">High School</span>
                            </div>
                        </div>
                        <div class="activity-tag">Core Activity</div>
                    </div>

                    <!-- 围棋卡片 -->
                    <div class="activity-card go-card" data-category="go">
                        <div class="activity-icon">🎯</div>
                        <div class="activity-title">Go Strategy</div>
                        <div class="activity-subtitle">Ancient wisdom game</div>
                        <div class="activity-timeline">
                            <div class="timeline-bar" style="width: 33%; background: linear-gradient(90deg, #7ED321, #96CEB4);"></div>
                            <span class="timeline-text">Age 7-11 (4 years)</span>
                        </div>
                        <div class="activity-stats">
                            <div class="stat-item">
                                <span class="stat-value">15%</span>
                                <span class="stat-label">Time Share</span>
                            </div>
                        </div>
                        <div class="activity-tag">Strategic Thinking</div>
                    </div>

                    <!-- 矿物研究卡片 -->
                    <div class="activity-card minerals-card" data-category="minerals">
                        <div class="activity-icon">💎</div>
                        <div class="activity-title">Mineral Research</div>
                        <div class="activity-subtitle">Earth's hidden treasures</div>
                        <div class="activity-timeline">
                            <div class="timeline-bar" style="width: 53%; background: linear-gradient(90deg, #50E3C2, #4ECDC4);"></div>
                            <span class="timeline-text">Age 9-16+ (7+ years)</span>
                        </div>
                        <div class="activity-stats">
                            <div class="stat-item">
                                <span class="stat-value">10%</span>
                                <span class="stat-label">Time Share</span>
                            </div>
                        </div>
                        <div class="activity-tag">Long-term Interest</div>
                    </div>

                    <!-- 游泳卡片 -->
                    <div class="activity-card swimming-card" data-category="swimming">
                        <div class="activity-icon">🏊‍♂️</div>
                        <div class="activity-title">Swimming</div>
                        <div class="activity-subtitle">Water freedom</div>
                        <div class="activity-timeline">
                            <div class="timeline-bar" style="width: 47%; background: linear-gradient(90deg, #F5A623, #FFEAA7);"></div>
                            <span class="timeline-text">Age 10-16+ (6+ years)</span>
                        </div>
                        <div class="activity-stats">
                            <div class="stat-item">
                                <span class="stat-value">10%</span>
                                <span class="stat-label">Time Share</span>
                            </div>
                        </div>
                        <div class="activity-tag">Physical Fitness</div>
                    </div>

                    <!-- 吉他卡片 -->
                    <div class="activity-card guitar-card" data-category="guitar">
                        <div class="activity-icon">🎸</div>
                        <div class="activity-title">Guitar</div>
                        <div class="activity-subtitle">Musical expression</div>
                        <div class="activity-timeline">
                            <div class="timeline-bar" style="width: 40%; background: linear-gradient(90deg, #BD10E0, #DDA0DD);"></div>
                            <span class="timeline-text">Age 11-16+ (5+ years)</span>
                        </div>
                        <div class="activity-stats">
                            <div class="stat-item">
                                <span class="stat-value">10%</span>
                                <span class="stat-label">Time Share</span>
                            </div>
                        </div>
                        <div class="activity-tag">Creative Arts</div>
                    </div>

                    <!-- 机器人3D设计卡片 -->
                    <div class="activity-card robotics-card" data-category="robotics">
                        <div class="activity-icon">🤖</div>
                        <div class="activity-title">Robotics & 3D</div>
                        <div class="activity-subtitle">Future technology</div>
                        <div class="activity-timeline">
                            <div class="timeline-bar" style="width: 13%; background: linear-gradient(90deg, #FF6B6B, #FF8E8E);"></div>
                            <span class="timeline-text">Age 15-16+ (1+ year)</span>
                        </div>
                        <div class="activity-stats">
                            <div class="stat-item">
                                <span class="stat-value">15%</span>
                                <span class="stat-label">Time Share</span>
                            </div>
                        </div>
                        <div class="activity-tag">New Skill</div>
                    </div>

                    <!-- UI/UX设计卡片 -->
                    <div class="activity-card uiux-card" data-category="uiux">
                        <div class="activity-icon">🎨</div>
                        <div class="activity-title">UI/UX Design</div>
                        <div class="activity-subtitle">User experience magic</div>
                        <div class="activity-timeline">
                            <div class="timeline-bar" style="width: 13%; background: linear-gradient(90deg, #4ECDC4, #45B7D1);"></div>
                            <span class="timeline-text">Age 15-16+ (1+ year)</span>
                        </div>
                        <div class="activity-stats">
                            <div class="stat-item">
                                <span class="stat-value">15%</span>
                                <span class="stat-label">Time Share</span>
                            </div>
                        </div>
                        <div class="activity-tag">Design Thinking</div>
                    </div>

                    <!-- 编程卡片 -->
                    <div class="activity-card code-card" data-category="code">
                        <div class="activity-icon">💻</div>
                        <div class="activity-title">Coding</div>
                        <div class="activity-subtitle">Digital creation</div>
                        <div class="activity-timeline">
                            <div class="timeline-bar" style="width: 13%; background: linear-gradient(90deg, #96CEB4, #A8E6CF);"></div>
                            <span class="timeline-text">Age 15-16+ (1+ year)</span>
                        </div>
                        <div class="activity-stats">
                            <div class="stat-item">
                                <span class="stat-value">10%</span>
                                <span class="stat-label">Time Share</span>
                            </div>
                        </div>
                        <div class="activity-tag">Learning</div>
                    </div>
                </div>

                <!-- Interactive Chart Container -->
                <div class="chart-container">
                    <canvas id="timeChart"></canvas>
                </div>
                
                <!-- Age Activity Distribution Chart -->
                <div class="age-activity-chart">
                    <h3 class="chart-title">Age Activity Distribution</h3>
                    <div class="chart-container">
                        <canvas id="ageChart"></canvas>
                    </div>
                    
                    <!-- Chart Legend -->
                    <div class="chart-legend">
                        <div class="legend-item">
                            <span class="legend-color study"></span>
                            <span>Family & Learning</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color go"></span>
                            <span>Go Strategy</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color minerals"></span>
                            <span>Mineral Interest</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color swimming"></span>
                            <span>Swimming</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color guitar"></span>
                            <span>Guitar</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color robotics"></span>
                            <span>Robotics & 3D</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color uiux"></span>
                            <span>UI/UX Design</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color coding"></span>
                            <span>Coding</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Space 卡片 -->
            <div class="card space-card">
                <h2 class="card-title">Global Footprint</h2>
                <p class="card-subtitle">My travel journey around the world. From early childhood adventures to international exploration, each trip has shaped my perspective.</p>
                

                
                <!-- Aceternity UI Timeline -->
                <div class="aceternity-timeline-container">
                    <div class="timeline-header-section">
                        <h3 class="timeline-main-title">Changelog from my journey</h3>
                        <p class="timeline-main-description">I've been traveling around the world for the past 10 years. Here's a timeline of my adventures.</p>
                    </div>
                    
                    <div class="timeline-content-wrapper">
                        <!-- 时间线竖线 -->
                        <div class="timeline-line-container">
                            <div class="timeline-line">
                                <div class="timeline-progress-beam"></div>
                        </div>
                    </div>
                    
                        <!-- 时间线条目 -->
                        <div class="timeline-entries">
                            <div class="timeline-entry" data-year="2014">
                                <div class="timeline-sticky-header">
                                    <div class="timeline-marker-dot">
                                        <div class="marker-inner"></div>
                        </div>
                                    <h4 class="timeline-year-title">2014</h4>
                    </div>
                                <div class="timeline-entry-content">
                                    <div class="timeline-entry-header">
                                        <div class="timeline-age-badge">AGE 3</div>
                                        <div class="timeline-location-title">Thailand</div>
                        </div>
                                    <div class="timeline-entry-description">First international adventure</div>
                                    <div class="timeline-tags">
                                        <span class="timeline-tag">Beach</span>
                                        <span class="timeline-tag">Culture</span>
                                        <button class="modal-button" onclick="showPhotosModal('Thailand')">View Travel Photos</button>
                    </div>
                        </div>
                    </div>
                    
                            <div class="timeline-entry" data-year="2015">
                                <div class="timeline-sticky-header">
                                    <div class="timeline-marker-dot">
                                        <div class="marker-inner"></div>
                        </div>
                                    <h4 class="timeline-year-title">2015</h4>
                    </div>
                                <div class="timeline-entry-content">
                                    <div class="timeline-entry-header">
                                        <div class="timeline-age-badge">AGE 6</div>
                                        <div class="timeline-location-title">Taiwan</div>
                        </div>
                                    <div class="timeline-entry-description">Island exploration</div>
                                    <div class="timeline-tags">
                                        <span class="timeline-tag">Nature</span>
                                        <span class="timeline-tag">Food</span>
                                        <button class="modal-button" onclick="showPhotosModal('Taiwan')">View Travel Photos</button>
                    </div>
                        </div>
                    </div>
                    
                            <div class="timeline-entry" data-year="2017">
                                <div class="timeline-sticky-header">
                                    <div class="timeline-marker-dot">
                                        <div class="marker-inner"></div>
                        </div>
                                    <h4 class="timeline-year-title">2017</h4>
                    </div>
                                <div class="timeline-entry-content">
                                    <div class="timeline-entry-header">
                                        <div class="timeline-age-badge">AGE 8</div>
                                        <div class="timeline-location-title">Xi'an, China</div>
                                    </div>
                                    <div class="timeline-entry-description">Historical discovery</div>
                                    <div class="timeline-tags">
                                        <span class="timeline-tag">History</span>
                                        <span class="timeline-tag">Terracotta</span>
                                        <button class="modal-button" onclick="showPhotosModal('Xi\'an, China')">View Travel Photos</button>
                                    </div>
                        </div>
                    </div>
                    
                            <div class="timeline-entry" data-year="2018">
                                <div class="timeline-sticky-header">
                                    <div class="timeline-marker-dot">
                                        <div class="marker-inner"></div>
                        </div>
                                    <h4 class="timeline-year-title">2018</h4>
                    </div>
                                <div class="timeline-entry-content">
                                    <div class="timeline-entry-header">
                                        <div class="timeline-age-badge">AGE 9</div>
                                        <div class="timeline-location-title">Hong Kong + Macau</div>
                                    </div>
                                    <div class="timeline-entry-description">Urban exploration</div>
                                    <div class="timeline-tags">
                                        <span class="timeline-tag">City</span>
                                        <span class="timeline-tag">Modern</span>
                                        <button class="modal-button" onclick="showPhotosModal('Hong Kong & Macau')">View Travel Photos</button>
                        </div>
                    </div>
                </div>

                            <div class="timeline-entry" data-year="2018-2">
                                <div class="timeline-sticky-header">
                                    <div class="timeline-marker-dot">
                                        <div class="marker-inner"></div>
                            </div>
                                    <h4 class="timeline-year-title">2018</h4>
                        </div>
                                <div class="timeline-entry-content">
                                    <div class="timeline-entry-header">
                                        <div class="timeline-age-badge">AGE 11</div>
                                        <div class="timeline-location-title">Vietnam</div>
                                    </div>
                                    <div class="timeline-entry-description">Southeast Asian adventure</div>
                                    <div class="timeline-tags">
                                        <span class="timeline-tag">Culture</span>
                                        <span class="timeline-tag">Nature</span>
                                        <button class="modal-button" onclick="showPhotosModal('Vietnam')">View Travel Photos</button>
                        </div>
                    </div>
                </div>

                            <div class="timeline-entry" data-year="2019">
                                <div class="timeline-sticky-header">
                                    <div class="timeline-marker-dot">
                                        <div class="marker-inner"></div>
                            </div>
                                    <h4 class="timeline-year-title">2019</h4>
                        </div>
                                <div class="timeline-entry-content">
                                    <div class="timeline-entry-header">
                                        <div class="timeline-age-badge">AGE 10</div>
                                        <div class="timeline-location-title">Singapore + Malaysia</div>
                                    </div>
                                    <div class="timeline-entry-description">Tropical adventure</div>
                                    <div class="timeline-tags">
                                        <span class="timeline-tag">Tropical</span>
                                        <span class="timeline-tag">Diversity</span>
                                        <button class="modal-button" onclick="showPhotosModal('Singapore & Malaysia')">View Travel Photos</button>
                        </div>
                    </div>
                </div>

                            <div class="timeline-entry" data-year="2017-2">
                                <div class="timeline-sticky-header">
                                    <div class="timeline-marker-dot">
                                        <div class="marker-inner"></div>
                            </div>
                                    <h4 class="timeline-year-title">2017</h4>
                        </div>
                                <div class="timeline-entry-content">
                                    <div class="timeline-entry-header">
                                        <div class="timeline-age-badge">AGE 10</div>
                                        <div class="timeline-location-title">Siguniang Mountain, China</div>
                                    </div>
                                    <div class="timeline-entry-description">Alpine adventure</div>
                                    <div class="timeline-tags">
                                        <span class="timeline-tag">Mountains</span>
                                        <span class="timeline-tag">Adventure</span>
                                        <button class="modal-button" onclick="showPhotosModal('Siguniang Mountain, China')">View Travel Photos</button>
                        </div>
                    </div>
                </div>

                            <div class="timeline-entry" data-year="2019-2">
                                <div class="timeline-sticky-header">
                                    <div class="timeline-marker-dot">
                                        <div class="marker-inner"></div>
                            </div>
                                    <h4 class="timeline-year-title">2019</h4>
                        </div>
                                <div class="timeline-entry-content">
                                    <div class="timeline-entry-header">
                                        <div class="timeline-age-badge">AGE 13</div>
                                        <div class="timeline-location-title">Beijing, China</div>
                                    </div>
                                    <div class="timeline-entry-description">Capital exploration</div>
                                    <div class="timeline-tags">
                                        <span class="timeline-tag">History</span>
                                        <span class="timeline-tag">Culture</span>
                                        <button class="modal-button" onclick="showPhotosModal('Beijing, China')">View Travel Photos</button>
                        </div>
                    </div>
                </div>

                            <div class="timeline-entry" data-year="2021">
                                <div class="timeline-sticky-header">
                                    <div class="timeline-marker-dot">
                                        <div class="marker-inner"></div>
                        </div>
                                    <h4 class="timeline-year-title">2021</h4>
                                </div>
                                <div class="timeline-entry-content">
                                    <div class="timeline-entry-header">
                                        <div class="timeline-age-badge">AGE 12</div>
                                        <div class="timeline-location-title">Dubai, UAE</div>
                                    </div>
                                    <div class="timeline-entry-description">Desert metropolis</div>
                                    <div class="timeline-tags">
                                        <span class="timeline-tag">Desert</span>
                                        <span class="timeline-tag">Luxury</span>
                                        <button class="modal-button" onclick="showPhotosModal('Dubai, UAE')">View Travel Photos</button>
                                    </div>
                                </div>
                    </div>
                    
                            <div class="timeline-entry" data-year="2022">
                                <div class="timeline-sticky-header">
                                    <div class="timeline-marker-dot">
                                        <div class="marker-inner"></div>
                            </div>
                                    <h4 class="timeline-year-title">2022</h4>
                        </div>
                                <div class="timeline-entry-content">
                                    <div class="timeline-entry-header">
                                        <div class="timeline-age-badge">AGE 14</div>
                                        <div class="timeline-location-title">Yunnan + Guizhou, China</div>
                                    </div>
                                    <div class="timeline-entry-description">Mountain exploration</div>
                                    <div class="timeline-tags">
                                        <span class="timeline-tag">Mountains</span>
                                        <span class="timeline-tag">Ethnic</span>
                                        <button class="modal-button" onclick="showPhotosModal('Yunnan & Guizhou, China')">View Travel Photos</button>
                                    </div>
                    </div>
                    </div>
                    
                            <div class="timeline-entry" data-year="2024">
                                <div class="timeline-sticky-header">
                                    <div class="timeline-marker-dot">
                                        <div class="marker-inner"></div>
                        </div>
                                    <h4 class="timeline-year-title">2024</h4>
                            </div>
                                <div class="timeline-entry-content">
                                    <div class="timeline-entry-header">
                                        <div class="timeline-age-badge">AGE 15</div>
                                        <div class="timeline-location-title">United States</div>
                        </div>
                                    <div class="timeline-entry-description">American dream</div>
                                    <div class="timeline-tags">
                                        <span class="timeline-tag">Freedom</span>
                                        <span class="timeline-tag">Innovation</span>
                                        <button class="modal-button" onclick="showPhotosModal('Atlanta, USA')">View Travel Photos</button>
                    </div>
                </div>
                            </div>
                        </div>
                    </div>
                    </div>
                    
                <!-- Timeline 统计摘要 -->
                <div class="timeline-summary">
                    <div class="summary-item comet-card" data-tilt>
                        <div class="comet-card-content">
                            <div class="summary-icon">🌍</div>
                            <div class="summary-number">8</div>
                            <div class="summary-label">Destinations</div>
                            <div class="summary-description">Visited around the world</div>
                            </div>
                        </div>
                    <div class="summary-item comet-card" data-tilt>
                        <div class="comet-card-content">
                            <div class="summary-icon">🏙️</div>
                            <div class="summary-number">12</div>
                            <div class="summary-label">Cities</div>
                            <div class="summary-description">Explored & discovered</div>
                        </div>
                    </div>
                    <div class="summary-item comet-card" data-tilt>
                        <div class="comet-card-content">
                            <div class="summary-icon">🗺️</div>
                            <div class="summary-number">3</div>
                            <div class="summary-label">Continents</div>
                            <div class="summary-description">Crossed borders</div>
                        </div>
                    </div>
                    <div class="summary-item comet-card" data-tilt>
                        <div class="comet-card-content">
                            <div class="summary-icon">⏰</div>
                            <div class="summary-number">12</div>
                            <div class="summary-label">Years</div>
                            <div class="summary-description">Of travel experience</div>
                                    </div>
                    </div>
                </div>

                <!-- Current Residence -->
                <div class="residence-card">
                    <div class="residence-icon">🏠</div>
                    <div class="residence-details">
                        <div class="residence-label">Current Residence</div>
                        <div class="residence-city">Chengdu, China</div>
                        <div class="residence-description">My hometown where I grew up and currently live</div>
                                </div>
                            </div>

                                <!-- Interactive Globe World Map -->
                <div class="globe-map-section">
                    <div class="map-header">
                        <h3 class="map-title">Travel</h3>
                        <div class="map-subtitle">
                            <span class="animated-text">Journey</span>
                        </div>
                        <p class="map-description">
                            My comprehensive travel journey from age 3 to 15, exploring 11 destinations across Asia, Middle East, and North America, experiencing diverse cultures and creating unforgettable memories.
                        </p>
                    </div>
                    
                    <!-- Interactive Globe Container -->
                    <div class="globe-container">
                        <div id="interactiveGlobe" class="globe-wrapper" style="height: 800px; width: 100%; border-radius: 16px; overflow: hidden; margin: 0;">
                            <!-- TechTravelMap 组件将在这里渲染 -->
                        </div>
                    </div>
                    
                    <!-- Travel Stats -->
                    <div class="travel-stats">
                        <div class="stat-item">
                            <div class="stat-number">11</div>
                            <div class="stat-label">DESTINATIONS</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">15+</div>
                            <div class="stat-label">CITIES</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">3</div>
                            <div class="stat-label">CONTINENTS</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">13</div>
                            <div class="stat-label">YEARS</div>
                        </div>
                    </div>
                </div>
                

            </div>
            
            <!-- Travel Details Modal -->
            <div id="travelModal" class="travel-modal">
                <div class="modal-overlay"></div>
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 class="modal-title">🌍 Travel Journey Details</h2>
                        <button class="modal-close" onclick="closeTravelModal()">×</button>
                    </div>
                    <div class="modal-body">
                        <div class="travel-summary">
                            <div class="summary-stats">
                                <div class="summary-item">
                                    <span class="summary-number">11</span>
                                    <span class="summary-label">Destinations</span>
                                </div>
                                <div class="summary-item">
                                    <span class="summary-number">15+</span>
                                    <span class="summary-label">Cities</span>
                                </div>
                                <div class="summary-item">
                                    <span class="summary-number">3</span>
                                    <span class="summary-label">Continents</span>
                                </div>
                                <div class="summary-item">
                                    <span class="summary-number">13</span>
                                    <span class="summary-label">Years</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="travel-timeline">
                            <h3>📅 Travel Timeline</h3>
                            <div class="timeline-items">
                    <div class="timeline-item">
                                    <div class="timeline-age">Age 3</div>
                        <div class="timeline-content">
                                        <div class="timeline-location">🇹🇭 Thailand</div>
                                        <div class="timeline-description">First international trip, exploring tropical paradise</div>
                                        <button class="modal-button" onclick="showPhotosModal('Thailand')">Photos</button>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                                    <div class="timeline-age">Age 6</div>
                        <div class="timeline-content">
                                        <div class="timeline-location">🇹🇼 Taiwan</div>
                                        <div class="timeline-description">Cultural exploration and family bonding</div>
                                        <button class="modal-button" onclick="showPhotosModal('Taiwan')">Photos</button>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                                    <div class="timeline-age">Age 8</div>
                        <div class="timeline-content">
                                        <div class="timeline-location">🇨🇳 Xi'an, China</div>
                                        <div class="timeline-description">Historical discovery of ancient capital</div>
                                        <button class="modal-button" onclick="showPhotosModal('Xi\\'an, China')">Photos</button>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                                    <div class="timeline-age">Age 9</div>
                        <div class="timeline-content">
                                        <div class="timeline-location">🇭🇰 Hong Kong + 🇲🇴 Macau</div>
                                        <div class="timeline-description">Urban adventure in vibrant cities</div>
                                        <button class="modal-button" onclick="showPhotosModal('Hong Kong & Macau')">Photos</button>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                                    <div class="timeline-age">Age 10</div>
                        <div class="timeline-content">
                                        <div class="timeline-location">🇸🇬 Singapore + 🇲🇾 Malaysia</div>
                                        <div class="timeline-description">Southeast Asian cultural immersion</div>
                                        <button class="modal-button" onclick="showPhotosModal('Singapore & Malaysia')">Photos</button>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                                    <div class="timeline-age">Age 12</div>
                        <div class="timeline-content">
                                        <div class="timeline-location">🇦🇪 Dubai, UAE</div>
                                        <div class="timeline-description">Desert luxury and modern architecture</div>
                                        <button class="modal-button" onclick="showPhotosModal('Dubai, UAE')">Photos</button>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                                    <div class="timeline-age">Age 14</div>
                        <div class="timeline-content">
                                        <div class="timeline-location">🇨🇳 Yunnan + Guizhou, China</div>
                                        <div class="timeline-description">Mountain landscapes and ethnic cultures</div>
                                        <button class="modal-button" onclick="showPhotosModal('Yunnan & Guizhou, China')">Photos</button>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                                    <div class="timeline-age">Age 15</div>
                        <div class="timeline-content">
                                        <div class="timeline-location">🇺🇸 Atlanta, USA</div>
                                        <div class="timeline-description">American experience and international education</div>
                                        <button class="modal-button" onclick="showPhotosModal('Atlanta, USA')">Photos</button>
                                    </div>
                        </div>
                    </div>
                </div>

                <div class="residence-info">
                            <h3>🏠 Current Residence</h3>
                            <div class="residence-card">
                    <div class="residence-icon">🏠</div>
                    <div class="residence-details">
                        <div class="residence-city">Chengdu, China</div>
                                    <div class="residence-description">My hometown and current base for adventures</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="modal-button" onclick="closeTravelModal()">Close</button>
                    </div>
                    </div>
                </div>

            <!-- Travel Photos Modal with Draggable Cards -->
            <div id="photosModal" class="travel-modal" style="display:none;">
                <div class="modal-overlay"></div>
                <div class="modal-content draggable-modal">
                    <div class="modal-header">
                        <h2 class="modal-title">📷 Travel Photos</h2>
                        <button class="modal-close" onclick="closePhotosModal()">×</button>
                        </div>
                    <div class="modal-body">
                        <div id="photosGallery" class="draggable-gallery">
                            <!-- 动态插入Draggable Card照片 -->
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="modal-button" onclick="closePhotosModal()">Close</button>
                    </div>
                </div>
                    </div>
                    
            <!-- Movie 卡片 -->
            <div class="card movie-card">
                <h2 class="card-title">Cinema Journey</h2>
                <p class="card-subtitle">My cinematic preferences and favorite movie genres</p>
                
                <div class="mini-chart">
                    <div class="chart-bar" style="height: 60%; background-color: #FF6B6B;"></div>
                    <div class="chart-bar" style="height: 80%; background-color: #4ECDC4;"></div>
                    <div class="chart-bar" style="height: 40%; background-color: #45B7D1;"></div>
                            </div>
                
                <div class="chart-labels">
                    <span>Romance</span>
                    <span>Drama</span>
                    <span>Comedy</span>
                        </div>
                    </div>
                    
            <!-- Musical Taste 卡片 -->
            <div class="card album-card inspira-card">
                <!-- Inspira UI 风格装饰元素 -->
                <div class="inspira-decoration">
                    <div class="floating-orb orb-1"></div>
                    <div class="floating-orb orb-2"></div>
                    <div class="floating-orb orb-3"></div>
                    <div class="gradient-line line-1"></div>
                    <div class="gradient-line line-2"></div>
                        </div>
                
                <h2 class="card-title inspira-title">
                    <span class="title-glow">Musical Taste</span>
                    <div class="title-underline"></div>
                </h2>
                <p class="card-subtitle inspira-subtitle">My passion for music across different genres and my favorite bands</p>
                
                <!-- 音乐类型偏好展示 - 重新优化版本 -->
                <div class="music-preference-section">
                    <!-- 背景装饰元素 -->
                    <div class="bg-decoration">
                        <div class="floating-orb orb-1"></div>
                        <div class="floating-orb orb-2"></div>
                        <div class="floating-orb orb-3"></div>
                        <div class="gradient-line line-1"></div>
                        <div class="gradient-line line-2"></div>
                        <div class="gradient-line line-3"></div>
                    </div>
                    
                    <h3 class="preference-title">
                        <span class="title-text">🎵 Genre Preferences</span>
                        <div class="title-underline"></div>
                        <div class="title-subtitle">Discover My Musical Journey</div>
                    </h3>
                    
                    <!-- 音乐类型卡片网格 -->
                    <div class="genre-cards-grid">
                        <div class="genre-card rock-card" data-genre="rock">
                            <div class="card-glow"></div>
                            <div class="card-content">
                                <div class="genre-tag">Most Loved</div>
                                <div class="card-main-content">
                                    <div class="genre-icon">🎸</div>
                                    <div class="genre-info">
                                        <h4 class="genre-name">Rock</h4>
                                        <div class="genre-rank">#1 ⭐</div>
                                        <div class="genre-power">45%</div>
                                        <div class="genre-description">Power & Energy</div>
                            </div>
                        </div>
                                <div class="genre-stats">
                                    <div class="stat-button">
                                        <span class="stat-label">BANDS</span>
                                        <span class="stat-value">5</span>
                                    </div>
                                    <div class="stat-button">
                                        <span class="stat-label">ALBUMS</span>
                                        <span class="stat-value">12</span>
                                    </div>
                                </div>
                    </div>
                </div>

                        <div class="genre-card pop-card" data-genre="pop">
                            <div class="card-glow"></div>
                            <div class="card-content">
                                <div class="genre-tag">Trending</div>
                                <div class="card-main-content">
                                    <div class="genre-icon">🎵</div>
                                    <div class="genre-info">
                                        <h4 class="genre-name">Pop</h4>
                                        <div class="genre-rank">#2 ⭐</div>
                                        <div class="genre-power">35%</div>
                                        <div class="genre-description">Melody & Harmony</div>
                        </div>
                                </div>
                                <div class="genre-stats">
                                    <div class="stat-button">
                                        <span class="stat-label">ARTISTS</span>
                                        <span class="stat-value">5</span>
                                    </div>
                                    <div class="stat-button">
                                        <span class="stat-label">HITS</span>
                                        <span class="stat-value">8</span>
                                    </div>
                                </div>
                            </div>
                    </div>
                    
                        <div class="genre-card metal-card" data-genre="metal">
                            <div class="card-glow"></div>
                            <div class="card-content">
                                <div class="genre-tag">Heavy</div>
                                <div class="card-main-content">
                                    <div class="genre-icon">🤘</div>
                                    <div class="genre-info">
                                        <h4 class="genre-name">Metal</h4>
                                        <div class="genre-rank">#3 ⭐</div>
                                        <div class="genre-power">20%</div>
                                        <div class="genre-description">Intensity & Power</div>
                                    </div>
                                </div>
                                <div class="genre-stats">
                                    <div class="stat-button">
                                        <span class="stat-label">BANDS</span>
                                        <span class="stat-value">4</span>
                                    </div>
                                    <div class="stat-button">
                                        <span class="stat-label">ALBUMS</span>
                                        <span class="stat-value">6</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 音乐统计概览 -->
                    <div class="music-stats-overview">
                        <div class="stats-card total-stats">
                            <div class="stats-icon">📊</div>
                            <div class="stats-content">
                                <h4>Total Collection</h4>
                                <div class="stats-numbers">
                                    <span class="number">14</span>
                                    <span class="label">Bands</span>
                                    </div>
                                    </div>
                        </div>
                        <div class="stats-card listening-time">
                            <div class="stats-icon">⏰</div>
                            <div class="stats-content">
                                <h4>Listening Time</h4>
                                <div class="stats-numbers">
                                    <span class="number">2.5k</span>
                                    <span class="label">Hours</span>
                                </div>
                            </div>
                        </div>
                        <div class="stats-card favorite-year">
                            <div class="stats-icon">📅</div>
                            <div class="stats-content">
                                <h4>Favorite Era</h4>
                                <div class="stats-numbers">
                                    <span class="number">90s</span>
                                    <span class="label">Golden Age</span>
                                </div>
                                    </div>
                                </div>
                            </div>
                            
                    <!-- 音乐频谱分析器 -->
                    <div class="music-spectrum-analyzer">
                        <div class="spectrum-header">
                            <h4>🎛️ Music Spectrum Analysis</h4>
                            <div class="spectrum-controls">
                                <button class="control-btn active">Live</button>
                                <button class="control-btn">Peak</button>
                                <button class="control-btn">History</button>
                                </div>
                            </div>
                        <div class="spectrum-bars">
                            <div class="spectrum-bar rock-spectrum" data-height="45">
                                <div class="bar-label">Rock</div>
                                <div class="bar-value">45%</div>
                        </div>
                            <div class="spectrum-bar pop-spectrum" data-height="35">
                                <div class="bar-label">Pop</div>
                                <div class="bar-value">35%</div>
                            </div>
                            <div class="spectrum-bar metal-spectrum" data-height="20">
                                <div class="bar-label">Metal</div>
                                <div class="bar-value">20%</div>
                            </div>
                        </div>
                        <div class="spectrum-footer">
                            <div class="spectrum-info">
                                <span class="info-item">🎯 Real-time Analysis</span>
                                <span class="info-item">📈 Dynamic Updates</span>
                                <span class="info-item">🎵 Genre Distribution</span>
                            </div>
                    </div>
                </div>
                
                    <!-- 音乐能量流 -->
                    <div class="music-energy-flow">
                        <div class="energy-header">
                            <h4>⚡ Energy Flow Visualization</h4>
                            <div class="energy-controls">
                                <button class="energy-btn active">Flow</button>
                                <button class="energy-btn">Pulse</button>
                            </div>
                        </div>
                        <div class="energy-container">
                            <div class="energy-line rock-line"></div>
                            <div class="energy-line pop-line"></div>
                            <div class="energy-line metal-line"></div>
                            <div class="energy-nodes">
                                <div class="node rock-node"></div>
                                <div class="node pop-node"></div>
                                <div class="node metal-node"></div>
                            </div>
                            <div class="energy-particles">
                                <div class="energy-particle p1"></div>
                                <div class="energy-particle p2"></div>
                                <div class="energy-particle p3"></div>
                                <div class="energy-particle p4"></div>
                                <div class="energy-particle p5"></div>
                            </div>
            </div>

                        <!-- 碟片音乐播放器 -->
                        <div class="vinyl-music-player">
                            <!-- 紫色脉冲线效果 -->
                            <div class="pulse-line top"></div>
                            <div class="pulse-line right"></div>
                            <div class="pulse-line bottom"></div>
                            <div class="pulse-line left"></div>
                            
                            <!-- 旋转光环效果 -->
                            <div class="rotating-ring"></div>
                            
                            <!-- 能量波纹效果 -->
                            <div class="energy-ripple"></div>
                            
                            <!-- 闪烁星星效果 -->
                            <div class="twinkle-star"></div>
                            <div class="twinkle-star"></div>
                            <div class="twinkle-star"></div>
                            <div class="twinkle-star"></div>
                            
                            <h5>🎵 Vinyl Music Player</h5>
                            

                            
                            <!-- 主播放器区域 - 简化版本 -->
                            <div class="vinyl-player-container">
                                <!-- 碟片区域 -->
                                <div class="vinyl-disc-container">
                                    <div class="vinyl-disc" id="vinylDisc">
                                        <div class="vinyl-label">
                                            <div class="label-text">
                                                <div class="artist-name">Pink Floyd</div>
                                                <div class="song-title">Wish You Were Here</div>
                                            </div>
                                        </div>
                                        <div class="vinyl-grooves">
                                            <div class="groove"></div>
                                            <div class="groove"></div>
                                            <div class="groove"></div>
                                            <div class="groove"></div>
                                            <div class="groove"></div>
                                        </div>
                                    </div>
                                    <!-- 唱针 -->
                                    <div class="tonearm" id="tonearm">
                                        <div class="tonearm-base"></div>
                                        <div class="tonearm-arm"></div>
                                        <div class="tonearm-needle"></div>
                                    </div>
                </div>
                
                                <!-- 播放器控制面板 -->
                                <div class="player-control-panel">
                                    <!-- 音频播放器装饰光点 -->
                                    <div class="audio-decoration">
                                        <div class="audio-light-point p1"></div>
                                        <div class="audio-light-point p2"></div>
                                        <div class="audio-light-point p3"></div>
                                        <div class="audio-light-point p4"></div>
                                    </div>
                                    
                                    <!-- 主音频元素 - 显示原生控件 -->
                                    <audio id="vinylAudio" controls style="width: 100%; margin-bottom: 20px;">
                                        <source src="music/Pink Floyd-Wish You Were Here (2011 - Remaster).ogg" type="audio/ogg">
                                        您的浏览器不支持音频播放
                                    </audio>
                                    
                                    <!-- 歌曲信息 -->
                                    <div class="track-display">
                                        <div class="track-title" id="trackTitle">🎵 Wish You Were Here</div>
                                        <div class="track-artist" id="trackArtist">Pink Floyd</div>
                </div>
            </div>

                                <!-- 音乐波纹效果 -->
                                <div class="music-wave">
                                    <div class="music-wave-bar"></div>
                                    <div class="music-wave-bar"></div>
                                    <div class="music-wave-bar"></div>
                                    <div class="music-wave-bar"></div>
                                    <div class="music-wave-bar"></div>
                                    <div class="music-wave-bar"></div>
                                    <div class="music-wave-bar"></div>
                                </div>
                            </div>
                
                            <!-- 音乐类型选择 -->
                            <div class="genre-selector">
                                <h6>🎼 Select Music Genre</h6>
                                <div class="genre-options">
                                    <button class="genre-option rock-option" data-genre="rock">
                                        <div class="genre-icon">🎸</div>
                                        <div class="genre-name">Rock</div>
                                        <div class="genre-desc">Classic & Modern Rock</div>
                                    </button>
                                    <button class="genre-option pop-option" data-genre="pop">
                                        <div class="genre-icon">🎵</div>
                                        <div class="genre-name">Pop</div>
                                        <div class="genre-desc">Popular Hits</div>
                                    </button>
                                    <button class="genre-option metal-option" data-genre="metal">
                                        <div class="genre-icon">🤘</div>
                                        <div class="genre-name">Metal</div>
                                        <div class="genre-desc">Heavy & Power Metal</div>
                                    </button>
                                </div>
                                <!-- 测试提示 -->
                                <div class="test-hint" style="margin-top: 15px; font-size: 0.9rem; color: #64748b; text-align: center;">
                                    💡 Click any genre button above to test functionality
                </div>
                

                            </div>
                            
                            <!-- 平台链接 -->
                            <div class="platform-links">
                                <h6>🌐 Listen on Platform</h6>
                                <div class="platform-grid">
                                    <a href="#" class="platform-link spotify-link" data-platform="spotify">
                                        <img src="https://upload.wikimedia.org/wikipedia/commons/8/84/Spotify_icon.svg" alt="Spotify">
                                        <span>Spotify</span>
                                    </a>
                                    <a href="#" class="platform-link youtube-link" data-platform="youtube">
                                        <img src="https://upload.wikimedia.org/wikipedia/commons/b/b8/YouTube_Logo_2017.svg" alt="YouTube">
                                        <span>YouTube</span>
                                    </a>
                                    <a href="#" class="platform-link apple-link" data-platform="apple">
                                        <img src="https://upload.wikimedia.org/wikipedia/commons/f/fa/Apple_logo_black.svg" alt="Apple Music">
                                        <span>Apple Music</span>
                                    </a>
                                    <a href="#" class="platform-link amazon-link" data-platform="amazon">
                                        <img src="https://upload.wikimedia.org/wikipedia/commons/a/a9/Amazon_logo.svg" alt="Amazon Music">
                                        <span>Amazon</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    

                    
                    <!-- 浮动音乐元素 -->
                    <div class="floating-music-elements">
                        <div class="music-element element-1">🎼</div>
                        <div class="music-element element-2">🎹</div>
                        <div class="music-element element-3">🎺</div>
                        <div class="music-element element-4">🥁</div>
                        <div class="music-element element-5">🎸</div>
                        <div class="music-element element-6">🎻</div>
                        <div class="music-element element-7">🎤</div>
                        <div class="music-element element-8">🎧</div>
                    </div>
                </div>
                
                <!-- 乐队展示区域 -->
                <!-- 乐队展示区域 - Bending Gallery -->
                <div class="bands-showcase inspira-showcase">
                    <h3 class="showcase-title inspira-showcase-title">
                        <span class="title-icon">🌟</span>
                        <span class="title-text">My Favorite Bands</span>
                        <div class="title-accent"></div>
                    </h3>
                    
                    <!-- Rock Legends Bending Gallery -->
                    <div class="genre-section rock-section">
                        <h4 class="genre-section-title">
                            <span class="genre-icon">🎸</span>
                            <span class="genre-text">Rock Legends</span>
                            <div class="genre-badge">5 Bands</div>
                        </h4>

                        <div class="bending-gallery-container">
                            <div class="bending-gallery" id="rockBendingGallery">
                                <!-- Rock 乐队卡片将在这里动态生成 -->
                            </div>
                            <div class="gallery-controls">
                                <button class="gallery-btn prev-btn" data-gallery="rock">
                                    <span class="btn-icon">←</span>
                                </button>
                                <button class="gallery-btn next-btn" data-gallery="rock">
                                    <span class="btn-icon">→</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Pop Icons Bending Gallery -->
                    <div class="genre-section pop-section">
                        <h4 class="genre-section-title">
                            <span class="genre-icon">🎤</span>
                            <span class="genre-text">Pop Icons</span>
                            <div class="genre-badge">5 Artists</div>
                        </h4>
                        <div class="bending-gallery-container">
                            <div class="bending-gallery" id="popBendingGallery">
                                <!-- Pop 艺术家卡片将在这里动态生成 -->
                            </div>
                            <div class="gallery-controls">
                                <button class="gallery-btn prev-btn" data-gallery="pop">
                                    <span class="btn-icon">←</span>
                                </button>
                                <button class="gallery-btn next-btn" data-gallery="pop">
                                    <span class="btn-icon">→</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Metal Masters Bending Gallery -->
                    <div class="genre-section metal-section">
                        <h4 class="genre-section-title">
                            <span class="genre-icon">🤘</span>
                            <span class="genre-text">Metal Masters</span>
                            <div class="genre-badge">4 Bands</div>
                        </h4>
                        <div class="bending-gallery-container">
                            <div class="bending-gallery" id="metalBendingGallery">
                                <!-- Metal 乐队卡片将在这里动态生成 -->
                            </div>
                            <div class="gallery-controls">
                                <button class="gallery-btn prev-btn" data-gallery="metal">
                                    <span class="btn-icon">←</span>
                                </button>
                                <button class="gallery-btn next-btn" data-gallery="metal">
                                    <span class="btn-icon">→</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 音乐统计图表 -->
                <div class="music-stats-section inspira-stats">
                    <h3 class="stats-title inspira-stats-title">
                        <span class="stats-icon">📊</span>
                        <span class="stats-text">Music Statistics</span>
                        <div class="stats-underline"></div>
                    </h3>
                    <div class="stats-grid">
                        <div class="stat-card inspira-stat-card">
                            <div class="stat-decoration">
                                <div class="stat-glow"></div>
                                <div class="stat-particles"></div>
                            </div>
                            <div class="stat-icon">🎧</div>
                            <div class="stat-number">500+</div>
                            <div class="stat-label">Songs</div>
                        </div>
                        <div class="stat-card inspira-stat-card">
                            <div class="stat-decoration">
                                <div class="stat-glow"></div>
                                <div class="stat-particles"></div>
                            </div>
                            <div class="stat-icon">🎵</div>
                            <div class="stat-number">50+</div>
                            <div class="stat-label">Albums</div>
                        </div>
                        <div class="stat-card inspira-stat-card">
                            <div class="stat-decoration">
                                <div class="stat-glow"></div>
                                <div class="stat-particles"></div>
                            </div>
                            <div class="stat-icon">🎭</div>
                            <div class="stat-number">15+</div>
                            <div class="stat-label">Genres</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="script.js"></script>
    
    <!-- 直接绑定按钮事件，确保功能正常 -->
    <script>
        // 等待页面完全加载
        window.addEventListener('load', function() {
            console.log('🌐 页面完全加载完成');
            
            // 清理可能存在的重复卡片
            const existingCards = document.querySelectorAll('.travel-details-card');
            if (existingCards.length > 0) {
                console.log('🧹 清理重复的卡片:', existingCards.length);
                existingCards.forEach(card => card.remove());
            }
            
            // 查找按钮
            const statsButton = document.querySelector('.stats-button');
            console.log('🔍 查找按钮结果:', statsButton);
            
            if (statsButton) {
                console.log('✅ 找到按钮，开始绑定事件');
                
                // 移除可能存在的旧事件监听器
                const newButton = statsButton.cloneNode(true);
                statsButton.parentNode.replaceChild(newButton, statsButton);
                
                // 重新获取按钮引用
                const freshButton = document.querySelector('.stats-button');
                
                // 直接绑定点击事件
                freshButton.onclick = function(e) {
                    console.log('🎯 按钮被点击！');
                    e.preventDefault();
                    e.stopPropagation();
                    
                    // 显示旅行详情
                    showTravelDetails();
                };
                
                // 添加视觉反馈
                freshButton.style.cursor = 'pointer';
                freshButton.style.transition = 'all 0.3s ease';
                
                // 悬停效果
                freshButton.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-2px)';
                    this.style.boxShadow = '0 8px 25px rgba(0, 0, 0, 0.2)';
                });
                
                freshButton.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0)';
                    this.style.boxShadow = '0 4px 15px rgba(0, 0, 0, 0.1)';
                });
                
                console.log('✅ 按钮事件绑定完成');
                
                // 测试按钮是否真的可以点击
                setTimeout(function() {
                    console.log('🧪 测试按钮状态...');
                    console.log('按钮可见性:', freshButton.offsetParent !== null);
                    console.log('按钮尺寸:', freshButton.offsetWidth, 'x', freshButton.offsetHeight);
                    console.log('按钮样式:', {
                        display: getComputedStyle(freshButton).display,
                        visibility: getComputedStyle(freshButton).visibility,
                        opacity: getComputedStyle(freshButton).opacity,
                        pointerEvents: getComputedStyle(freshButton).pointerEvents,
                        cursor: getComputedStyle(freshButton).cursor
                    });
                }, 1000);
                
            } else {
                console.error('❌ 未找到按钮！');
                
                // 列出所有可能的按钮
                const allButtons = document.querySelectorAll('button');
                console.log('页面中的所有按钮:', allButtons);
                
                // 列出所有包含 stats 的元素
                const allStatsElements = document.querySelectorAll('[class*="stats"]');
                console.log('所有包含 stats 的元素:', allStatsElements);
                
                // 尝试其他选择器
                const buttonByText = Array.from(document.querySelectorAll('button')).find(btn => 
                    btn.textContent.includes('Travel') || btn.textContent.includes('Details')
                );
                console.log('通过文本查找按钮:', buttonByText);
            }
        });
        
        // 第二个showTravelDetails函数已删除，使用最新的弹窗版本
        
        // 添加键盘事件支持
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                const cards = document.querySelectorAll('.travel-details-card');
                cards.forEach(card => card.remove());
            }
        });
        
        // Timeline 交互效果
        function initTimelineEffects() {
            console.log('🎯 初始化 Timeline 效果');
            
            const timelineItems = document.querySelectorAll('.timeline-item');
            const timelineProgress = document.querySelector('.timeline-progress');
            
            // 滚动动画
            const observerOptions = {
                threshold: 0.3,
                rootMargin: '0px 0px -100px 0px'
            };
            
            const timelineObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.animationPlayState = 'running';
                        
                        // 添加悬停效果
                        entry.target.addEventListener('mouseenter', function() {
                            this.style.transform = 'scale(1.02)';
                            this.style.transition = 'transform 0.3s ease';
                        });
                        
                        entry.target.addEventListener('mouseleave', function() {
                            this.style.transform = 'scale(1)';
                        });
                    }
                });
            }, observerOptions);
            
            timelineItems.forEach(item => {
                timelineObserver.observe(item);
                
                // 点击展开详情
                item.addEventListener('click', function() {
                    const content = this.querySelector('.timeline-content');
                    const isExpanded = content.classList.contains('expanded');
                    
                    // 移除其他展开的项目
                    timelineItems.forEach(otherItem => {
                        if (otherItem !== this) {
                            otherItem.querySelector('.timeline-content').classList.remove('expanded');
                        }
                    });
                    
                    // 切换当前项目
                    if (isExpanded) {
                        content.classList.remove('expanded');
                    } else {
                        content.classList.add('expanded');
                    }
                });
            });
            
            // 进度条动画
            if (timelineProgress) {
                const updateProgress = () => {
                    const scrollTop = window.pageYOffset;
                    const timelineContainer = document.querySelector('.travel-timeline-container');
                    const containerTop = timelineContainer.offsetTop;
                    const containerHeight = timelineContainer.offsetHeight;
                    const windowHeight = window.innerHeight;
                    
                    if (scrollTop + windowHeight > containerTop && scrollTop < containerTop + containerHeight) {
                        const progress = Math.min(100, Math.max(0, 
                            ((scrollTop + windowHeight - containerTop) / (containerHeight + windowHeight)) * 100
                        ));
                        timelineProgress.style.height = progress + '%';
                    }
                };
                
                window.addEventListener('scroll', updateProgress);
                updateProgress(); // 初始调用
            }
            
            // 添加粒子效果
            addTimelineParticles();
        }
        
        // 添加粒子效果 - 优化版本
        function addTimelineParticles() {
            const timelineContainer = document.querySelector('.travel-timeline-container');
            if (!timelineContainer) return;
            
            // 创建粒子容器
            const particlesContainer = document.createElement('div');
            particlesContainer.className = 'timeline-particles';
            particlesContainer.style.cssText = `
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                pointer-events: none;
                z-index: 0;
                overflow: hidden;
            `;
            
            timelineContainer.appendChild(particlesContainer);
            
            // 创建优化数量的粒子
            for (let i = 0; i < 8; i++) {
                createParticle(particlesContainer, i);
            }
        }
        
        function createParticle(container, index) {
            const particle = document.createElement('div');
            particle.className = 'timeline-particle';
            
            const size = Math.random() * 3 + 1.5; // 减小粒子尺寸
            const x = Math.random() * 100;
            const y = Math.random() * 100;
            const duration = 15 + index * 2; // 基于索引的持续时间
            const delay = index * 0.5; // 基于索引的延迟
            
            particle.style.cssText = `
                position: absolute;
                width: ${size}px;
                height: ${size}px;
                background: linear-gradient(135deg, #667eea, #764ba2);
                border-radius: 50%;
                left: ${x}%;
                top: ${y}%;
                opacity: 0.4;
                animation: float ${duration}s infinite ease-in-out ${delay}s;
                z-index: 0;
                filter: blur(0.5px);
            `;
            
            container.appendChild(particle);
        }
        
        // 测试 Bending Gallery 函数
        function testBendingGallery(genre) {
            console.log(`🧪 测试 ${genre} Bending Gallery`);
            const gallery = document.getElementById(`${genre}BendingGallery`);
            if (gallery) {
                console.log(`✅ 找到 ${genre} 画廊:`, gallery);
                console.log(`画廊内容:`, gallery.innerHTML);
                console.log(`画廊子元素数量:`, gallery.children.length);
                
                // 强制显示所有卡片
                const cards = gallery.querySelectorAll('.bending-gallery-card');
                cards.forEach((card, index) => {
                    card.style.opacity = '1';
                    card.style.visibility = 'visible';
                    card.style.transform = 'translate3d(0, 0, 0) scale(1) rotateY(0deg) rotateX(0deg)';
                    console.log(`🔧 强制显示卡片 ${index}: ${card.dataset.band}`);
                });
            } else {
                console.error(`❌ 未找到 ${genre} 画廊`);
            }
        }
        
        // 强制显示所有画廊的函数
        function forceShowAllGalleries() {
            console.log('🔧 强制显示所有画廊');
            ['rock', 'pop', 'metal'].forEach(genre => {
                const gallery = document.getElementById(`${genre}BendingGallery`);
                if (gallery) {
                    const cards = gallery.querySelectorAll('.bending-gallery-card');
                    cards.forEach((card, index) => {
                        card.style.opacity = '1';
                        card.style.visibility = 'visible';
                        card.style.transform = 'translate3d(0, 0, 0) scale(1) rotateY(0deg) rotateX(0deg)';
                    });
                    console.log(`✅ ${genre} 画廊强制显示完成`);
                }
            });
        }
        
        // 检查图片文件状态
        function checkImageFiles() {
            console.log('🔍 检查图片文件状态...');
            const imageFiles = [
                './image/The Dark Side Of The Moon.png',
                './image/AppetiteforDestruction.jpg',
                './image/Acoustica Scorpions.jpg',
                './image/NirvanaNevermind.jpg',
                './image/machine head deep purple.jpg',
                './image/Rock_and_Roll.jpg',
                './image/周传雄.jpg',
                './image/林俊杰.jpeg',
                './image/eagles.png',
                './image/dookie green day.jpeg',
                './image/Master of Puppets.jpg',
                './image/Bon-Jovi-Livin.webp',
                './image/The Joshua Tree.jpg',
                './image/Slipknot_Iowa.jpg'
            ];
            
            imageFiles.forEach(imagePath => {
                const testImg = new Image();
                testImg.onload = () => {
                    console.log(`✅ 文件存在: ${imagePath}`);
                };
                testImg.onerror = () => {
                    console.error(`❌ 文件不存在: ${imagePath}`);
                };
                testImg.src = imagePath;
            });
        }
        

        
        // 重新加载所有画廊
        function reloadAllGalleries() {
            console.log('🔄 重新加载所有画廊...');
            
            // 清空现有画廊
            ['rock', 'pop', 'metal'].forEach(genre => {
                const gallery = document.getElementById(`${genre}BendingGallery`);
                if (gallery) {
                    gallery.innerHTML = '';
                    console.log(`🧹 清空 ${genre} 画廊`);
                }
            });
            
            // 重新初始化
            setTimeout(() => {
                console.log('🎨 重新初始化画廊...');
                initBendingGalleries();
            }, 100);
        }
        
        // 测试 Eagles 图片加载
        function testEaglesImage() {
            console.log('🦅 测试 Eagles 图片加载...');
            const testImg = new Image();
            testImg.onload = () => {
                console.log(`✅ Eagles 图片加载成功: ${testImg.src}`);
                console.log(`  📏 图片尺寸: ${testImg.naturalWidth} x ${testImg.naturalHeight}`);
            };
            testImg.onerror = () => {
                console.error(`❌ Eagles 图片加载失败`);
            };
            testImg.src = './image/eagles.png';
        }
        
        // 页面加载完成后初始化 Timeline 效果
        window.addEventListener('load', function() {
            console.log('🚀 页面加载完成，开始初始化...');
            setTimeout(initTimelineEffects, 1000);
            initCometCards(); // 初始化 Comet Cards
            initMicroAnimations(); // 初始化微动效
            
            // 延迟初始化 Bending Gallery，确保 DOM 完全加载
            setTimeout(() => {
                console.log('🎨 开始初始化 Bending Galleries...');
                initBendingGalleries();
            }, 500);
            
            
        });
        
        // 初始化微动效系统
        function initMicroAnimations() {
            console.log('✨ 初始化微动效系统');
            
            // 为所有卡片添加微动效
            const cards = document.querySelectorAll('.card');
            cards.forEach((card, index) => {
                // 添加滚动触发动画
                card.style.opacity = '0';
                card.style.transform = 'translateY(30px)';
                card.style.transition = 'all 0.6s ease';
                
                // 延迟显示动画
                setTimeout(() => {
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, 200 + index * 100);
                
                // 添加悬停微动效
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-8px) scale(1.02)';
                    this.style.boxShadow = '0 12px 40px rgba(0, 0, 0, 0.15)';
                });
                
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0) scale(1)';
                    this.style.boxShadow = '0 4px 20px rgba(0, 0, 0, 0.08)';
                });
            });
            
            // 为图标添加呼吸动画
            const icons = document.querySelectorAll('.stat-icon, .summary-icon');
            icons.forEach((icon, index) => {
                icon.style.animation = `breath 3s ease-in-out infinite ${index * 0.2}s`;
            });
            
            // 为数字添加计数动画
            const numbers = document.querySelectorAll('.stat-number, .summary-number');
            numbers.forEach((number, index) => {
                animateNumber(number, index * 200);
            });
            
            // 为按钮添加脉冲效果
            const buttons = document.querySelectorAll('button');
            buttons.forEach(button => {
                button.addEventListener('mouseenter', function() {
                    this.style.animation = 'pulse 0.6s ease-in-out';
                });
                
                button.addEventListener('animationend', function() {
                    this.style.animation = '';
                });
            });
        }
        
        // 数字计数动画
        function animateNumber(element, delay) {
            const finalNumber = parseInt(element.textContent.replace(/\D/g, ''));
            const duration = 2000;
            const steps = 60;
            const stepValue = finalNumber / steps;
            let currentStep = 0;
            
            setTimeout(() => {
                const timer = setInterval(() => {
                    currentStep++;
                    const currentValue = Math.floor(stepValue * currentStep);
                    element.textContent = element.textContent.replace(/\d+/, currentValue);
                    
                    if (currentStep >= steps) {
                        element.textContent = element.textContent.replace(/\d+/, finalNumber);
                        clearInterval(timer);
                    }
                }, duration / steps);
            }, delay);
        }
        
        // Comet Card 3D 倾斜效果
        function initCometCards() {
            console.log('🚀 初始化 Comet Cards 3D 效果');
            
            const cometCards = document.querySelectorAll('.comet-card[data-tilt]');
            
            cometCards.forEach(card => {
                card.addEventListener('mousemove', handleCometCardTilt);
                card.addEventListener('mouseleave', resetCometCardTilt);
            });
        }
        
        // Bending Gallery 初始化 - 深度修复版本
        function initBendingGalleries() {
            console.log('🎨 初始化 Bending Galleries');
            console.log('🔍 检查 DOM 元素...');
            
            // 检查必要的 DOM 元素是否存在
            const rockGallery = document.getElementById('rockBendingGallery');
            const popGallery = document.getElementById('popBendingGallery');
            const metalGallery = document.getElementById('metalBendingGallery');
            
            console.log('Rock Gallery:', rockGallery);
            console.log('Pop Gallery:', popGallery);
            console.log('Metal Gallery:', metalGallery);
            
            if (!rockGallery || !popGallery || !metalGallery) {
                console.error('❌ 某些 Bending Gallery 元素未找到！');
                return;
            }
            
            // 乐队数据按类型分组 - 使用多种路径尝试
            const bandData = {
                rock: [
                    {
                        id: 'pink-floyd',
                        name: 'Pink Floyd',
                        genre: 'Progressive Rock',
                        album: 'The Dark Side of the Moon',
                        image: './image/The Dark Side Of The Moon.png',
                        fallbackImages: [
                            'image/The Dark Side Of The Moon.png',
                            '/image/The Dark Side Of The Moon.png',
                            '../image/The Dark Side Of The Moon.png'
                        ],
                        description: 'Masters of progressive rock with iconic albums like "Dark Side of the Moon"',
                        tags: ['Progressive', 'Psychedelic']
                    },
                    {
                        id: 'guns-n-roses',
                        name: 'Guns N\' Roses',
                        genre: 'Hard Rock',
                        album: 'Appetite for Destruction',
                        image: './image/AppetiteforDestruction.jpg',
                        fallbackImages: [
                            'image/AppetiteforDestruction.jpg',
                            '/image/AppetiteforDestruction.jpg',
                            '../image/AppetiteforDestruction.jpg'
                        ],
                        description: 'Iconic hard rock band known for "Appetite for Destruction"',
                        tags: ['Hard Rock', 'Classic']
                    },
                    {
                        id: 'scorpions',
                        name: 'Scorpions',
                        genre: 'Heavy Metal',
                        album: 'Acoustica',
                        image: './image/Acoustica Scorpions.jpg',
                        fallbackImages: [
                            'image/Acoustica Scorpions.jpg',
                            '/image/Acoustica Scorpions.jpg',
                            '../image/Acoustica Scorpions.jpg'
                        ],
                        description: 'German heavy metal pioneers with powerful riffs and melodies',
                        tags: ['Heavy Metal', 'German']
                    },
                    {
                        id: 'nirvana',
                        name: 'Nirvana',
                        genre: 'Grunge Rock',
                        album: 'Nevermind',
                        image: './image/NirvanaNevermind.jpg',
                        fallbackImages: [
                            'image/NirvanaNevermind.jpg',
                            '/image/NirvanaNevermind.jpg',
                            '../image/NirvanaNevermind.jpg'
                        ],
                        description: 'Grunge pioneers who revolutionized rock music with "Nevermind"',
                        tags: ['Grunge', 'Alternative']
                    },
                    {
                        id: 'deep-purple',
                        name: 'Deep Purple',
                        genre: 'Hard Rock',
                        album: 'Machine Head',
                        image: './image/machine head deep purple.jpg',
                        fallbackImages: [
                            'image/machine head deep purple.jpg',
                            '/image/machine head deep purple.jpg',
                            '../image/machine head deep purple.jpg'
                        ],
                        description: 'Classic hard rock legends with iconic "Machine Head" album',
                        tags: ['Hard Rock', 'Classic']
                    }
                ],
                pop: [
                    {
                        id: 'beyond',
                        name: 'Beyond',
                        genre: 'Cantopop Rock',
                        album: 'Rock and Roll',
                        image: './image/Rock_and_Roll.jpg',
                        fallbackImages: [
                            'image/Rock_and_Roll.jpg',
                            '/image/Rock_and_Roll.jpg',
                            '../image/Rock_and_Roll.jpg'
                        ],
                        description: 'Legendary Hong Kong rock band with timeless classics',
                        tags: ['Cantopop', 'Rock']
                    },
                    {
                        id: 'jay-zhou',
                        name: 'Jay Zhou',
                        genre: 'Mandopop',
                        album: '周传雄专辑',
                        image: './image/周传雄.jpg',
                        fallbackImages: [
                            'image/周传雄.jpg',
                            '/image/周传雄.jpg',
                            '../image/周传雄.jpg'
                        ],
                        description: 'Taiwanese pop icon revolutionizing Chinese music industry',
                        tags: ['Mandopop', 'Innovative']
                    },
                    {
                        id: 'jj-lin',
                        name: 'JJ Lin',
                        genre: 'Mandopop',
                        album: '林俊杰专辑',
                        image: './image/林俊杰.jpeg',
                        fallbackImages: [
                            'image/林俊杰.jpeg',
                            '/image/林俊杰.jpeg',
                            '../image/林俊杰.jpeg'
                        ],
                        description: 'Singaporean singer-songwriter with emotional ballads',
                        tags: ['Mandopop', 'Ballads']
                    },
                    {
                        id: 'eagles',
                        name: 'Eagles',
                        genre: 'Country Rock',
                        album: 'Hotel California',
                        image: './image/eagles.png',
                        fallbackImages: [
                            'image/eagles.png',
                            '/image/eagles.png',
                            '../image/eagles.png'
                        ],
                        description: 'American rock legends with timeless "Hotel California" masterpiece',
                        tags: ['Country Rock', 'Classic']
                    },
                    {
                        id: 'green-day',
                        name: 'Green Day',
                        genre: 'Punk Rock',
                        album: 'Dookie',
                        image: './image/dookie green day.jpeg',
                        fallbackImages: [
                            'image/dookie green day.jpeg',
                            '/image/dookie green day.jpeg',
                            '../image/dookie green day.jpeg'
                        ],
                        description: 'Punk rock pioneers with revolutionary "Dookie" album',
                        tags: ['Punk Rock', 'Alternative']
                    }
                ],
                metal: [
                    {
                        id: 'metallica',
                        name: 'Metallica',
                        genre: 'Thrash Metal',
                        album: 'Master of Puppets',
                        image: './image/Master of Puppets.jpg',
                        fallbackImages: [
                            'image/Master of Puppets.jpg',
                            '/image/Master of Puppets.jpg',
                            '../image/Master of Puppets.jpg'
                        ],
                        description: 'Thrash metal legends with "Master of Puppets" masterpiece',
                        tags: ['Thrash', 'Metal']
                    },
                    {
                        id: 'bon-jovi',
                        name: 'Bon Jovi',
                        genre: 'Hard Rock',
                        album: 'Livin\' on a Prayer',
                        image: './image/Bon-Jovi-Livin.webp',
                        fallbackImages: [
                            'image/Bon-Jovi-Livin.webp',
                            '/image/Bon-Jovi-Livin.webp',
                            '../image/Bon-Jovi-Livin.webp'
                        ],
                        description: 'American rock band with anthems like "Livin\' on a Prayer"',
                        tags: ['Hard Rock', 'Anthems']
                    },
                    {
                        id: 'u2',
                        name: 'U2',
                        genre: 'Alternative Rock',
                        album: 'The Joshua Tree',
                        image: './image/The Joshua Tree.jpg',
                        fallbackImages: [
                            'image/The Joshua Tree.jpg',
                            '/image/The Joshua Tree.jpg',
                            '../image/The Joshua Tree.jpg'
                        ],
                        description: 'Irish rock band with "The Joshua Tree" landmark album',
                        tags: ['Alternative', 'Rock']
                    },
                    {
                        id: 'slipknot',
                        name: 'Slipknot',
                        genre: 'Nu Metal',
                        album: 'Iowa',
                        image: './image/Slipknot_Iowa.jpg',
                        fallbackImages: [
                            'image/Slipknot_Iowa.jpg',
                            '/image/Slipknot_Iowa.jpg',
                            '../image/Slipknot_Iowa.jpg'
                        ],
                        description: 'Nu metal pioneers with intense and powerful "Iowa" album',
                        tags: ['Nu Metal', 'Heavy']
                    }
                ]
            };
            
            // 为每个类型初始化 Bending Gallery
            Object.keys(bandData).forEach(genre => {
                console.log(`🎵 初始化 ${genre} 类型，包含 ${bandData[genre].length} 个乐队`);
                bandData[genre].forEach(band => {
                    console.log(`  - ${band.name}: ${band.album}`);
                    // 深度测试图片路径
                    testImagePathWithFallbacks(band);
                });
                initGenreBendingGallery(genre, bandData[genre]);
            });
        }
        
        // 智能图片路径测试函数 - 自动尝试备用路径
        function testImagePathWithFallbacks(band) {
            console.log(`🔍 测试图片路径: ${band.name} - ${band.image}`);
            
            // 首先尝试主路径
            testImagePath(band.image, band.name, () => {
                // 主路径成功，不需要尝试备用路径
                console.log(`✅ 主路径成功: ${band.name}`);
            }, () => {
                // 主路径失败，尝试备用路径
                console.log(`🔄 主路径失败，尝试备用路径: ${band.name}`);
                tryFallbackPaths(band);
            });
        }
        
        // 尝试备用路径
        function tryFallbackPaths(band) {
            if (!band.fallbackImages || band.fallbackImages.length === 0) {
                console.error(`❌ 没有备用路径: ${band.name}`);
                return;
            }
            
            let currentIndex = 0;
            
            function tryNextPath() {
                if (currentIndex >= band.fallbackImages.length) {
                    console.error(`❌ 所有路径都失败: ${band.name}`);
                    return;
                }
                
                const fallbackPath = band.fallbackImages[currentIndex];
                console.log(`🔄 尝试备用路径 ${currentIndex + 1}: ${fallbackPath}`);
                
                testImagePath(fallbackPath, band.name, () => {
                    // 备用路径成功，更新主路径
                    console.log(`✅ 备用路径成功: ${band.name} - ${fallbackPath}`);
                    band.image = fallbackPath;
                }, () => {
                    // 备用路径失败，尝试下一个
                    currentIndex++;
                    tryNextPath();
                });
            }
            
            tryNextPath();
        }
        
        // 测试单个图片路径
        function testImagePath(imagePath, bandName, onSuccess, onError) {
            const testImg = new Image();
            testImg.onload = () => {
                console.log(`✅ 图片加载成功: ${bandName} - ${imagePath}`);
                console.log(`  📏 图片尺寸: ${testImg.naturalWidth} x ${testImg.naturalHeight}`);
                if (onSuccess) onSuccess();
            };
            testImg.onerror = () => {
                console.error(`❌ 图片加载失败: ${bandName} - ${imagePath}`);
                if (onError) onError();
            };
            testImg.src = imagePath;
        }
        
        // 全局图片错误处理函数
        function handleImageError(imgElement, bandName) {
            console.error(`❌ 全局图片错误: ${bandName}`);
            imgElement.style.display = 'none';
            
            // 查找对应的备用元素
            const card = imgElement.closest('.bending-gallery-card');
            if (card) {
                const fallback = card.querySelector('.card-fallback');
                if (fallback) {
                    fallback.style.display = 'flex';
                }
            }
        }
        
        // 初始化特定类型的 Bending Gallery
        function initGenreBendingGallery(genre, bands) {
            console.log(`🎨 初始化 ${genre} Bending Gallery，乐队数量: ${bands.length}`);
            
            const gallery = document.getElementById(`${genre}BendingGallery`);
            const prevBtn = gallery.parentElement.querySelector('.prev-btn');
            const nextBtn = gallery.parentElement.querySelector('.next-btn');
            
            if (!gallery || !prevBtn || !nextBtn) {
                console.error(`❌ ${genre} Bending Gallery 元素未找到`);
                return;
            }
            
            let currentIndex = 0;
            const totalBands = bands.length;
            const bendAmount = 3; // 弯曲程度
            
            // 根据屏幕尺寸动态调整弯曲半径
            function getAdaptiveRadius() {
                const screenWidth = window.innerWidth;
                if (screenWidth <= 480) {
                    return 250; // 移动端
                } else if (screenWidth <= 768) {
                    return 300; // 平板端
                } else {
                    return 400; // 桌面端
                }
            }
            
            let radius = getAdaptiveRadius();
            
            // 监听窗口大小变化，动态调整半径
            window.addEventListener('resize', () => {
                radius = getAdaptiveRadius();
                updateCardPositions();
            });
            
            // 渲染 Bending Gallery
            function renderBendingGallery() {
                console.log(`🎨 渲染 ${genre} Bending Gallery，乐队数量: ${bands.length}`);
                gallery.innerHTML = '';
                
                bands.forEach((band, index) => {
                    console.log(`  📱 创建卡片 ${index + 1}: ${band.name}`);
                    const card = createBendingCard(band, index);
                    gallery.appendChild(card);
                    console.log(`  ✅ 卡片已添加到画廊: ${band.name}`);
                });
                
                console.log(`🎯 开始更新卡片位置...`);
                updateCardPositions();
                console.log(`✅ ${genre} Bending Gallery 渲染完成`);
            }
            
            // 创建弯曲卡片 - 深度修复版本
            function createBendingCard(band, index) {
                const card = document.createElement('div');
                card.className = 'bending-gallery-card';
                card.dataset.band = band.id;
                card.dataset.index = index;
                
                // 验证图片路径
                console.log(`🖼️ 创建卡片: ${band.name}, 图片路径: ${band.image}`);
                
                card.innerHTML = `
                    <div class="card-image">
                        <img src="${band.image}" alt="${band.name} - ${band.album}" class="card-avatar" 
                             onload="console.log('✅ 图片加载成功: ${band.name}')" 
                             onerror="handleImageError(this, '${band.name}')">
                        <div class="card-overlay">
                            <span class="card-name">${band.name}</span>
                            <span class="card-genre">${band.genre}</span>
                            <span class="card-album">${band.album}</span>
                        </div>
                        <!-- 图片加载失败时的备用显示 -->
                        <div class="card-fallback" style="display: none; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(135deg, #667eea, #764ba2); display: flex; align-items: center; justify-content: center; color: white; font-size: 48px; font-weight: bold; border-radius: 20px;">
                            ${band.name.charAt(0)}
                        </div>
                    </div>
                    <div class="card-info">
                        <h5 class="card-title">${band.name}</h5>
                        <p class="card-description">${band.description}</p>
                        <div class="card-tags">
                            ${band.tags.map(tag => `<span class="card-tag">${tag}</span>`).join('')}
                        </div>
                    </div>
                `;
                
                // 智能图片加载处理
                const img = card.querySelector('.card-avatar');
                const fallback = card.querySelector('.card-fallback');
                
                // 图片加载成功
                img.addEventListener('load', function() {
                    console.log(`✅ 卡片图片加载成功: ${band.name}`);
                    this.style.display = 'block';
                    if (fallback) fallback.style.display = 'none';
                });
                
                // 图片加载失败 - 智能重试
                img.addEventListener('error', function() {
                    console.error(`❌ 卡片图片加载失败: ${band.name} - ${band.image}`);
                    handleImageErrorInCard(this, fallback, band);
                });
                
                // 添加悬停效果
                let isHovered = false;
                
                card.addEventListener('mouseenter', () => {
                    isHovered = true;
                    // 保存当前变换状态，添加悬停效果
                    const currentTransform = card.style.transform;
                    card.style.transform = currentTransform + ' scale(1.05) translateZ(30px)';
                    card.style.zIndex = 2000; // 悬停时最高层级
                });
                
                card.addEventListener('mouseleave', () => {
                    isHovered = false;
                    // 延迟更新位置，避免与悬停动画冲突
                    setTimeout(() => {
                        if (!isHovered) {
                            updateCardPositions();
                        }
                    }, 100);
                });
                
                return card;
            }
            
            // 处理卡片中的图片错误
            function handleImageErrorInCard(imgElement, fallbackElement, band) {
                // 隐藏失败的图片
                imgElement.style.display = 'none';
                
                // 显示备用内容
                if (fallbackElement) {
                    fallbackElement.style.display = 'flex';
                    console.log(`🔄 显示备用内容: ${band.name}`);
                }
                
                // 尝试备用路径
                if (band.fallbackImages && band.fallbackImages.length > 0) {
                    console.log(`🔄 尝试备用图片路径: ${band.name}`);
                    tryAlternativeImagePath(imgElement, fallbackElement, band);
                }
            }
            
            // 尝试备用图片路径
            function tryAlternativeImagePath(imgElement, fallbackElement, band) {
                let currentIndex = 0;
                
                function tryNextPath() {
                    if (currentIndex >= band.fallbackImages.length) {
                        console.log(`❌ 所有备用路径都失败: ${band.name}`);
                        return;
                    }
                    
                    const fallbackPath = band.fallbackImages[currentIndex];
                    console.log(`🔄 尝试备用路径 ${currentIndex + 1}: ${fallbackPath}`);
                    
                    const testImg = new Image();
                    testImg.onload = () => {
                        console.log(`✅ 备用路径成功: ${band.name} - ${fallbackPath}`);
                        imgElement.src = fallbackPath;
                        imgElement.style.display = 'block';
                        if (fallbackElement) fallbackElement.style.display = 'none';
                    };
                    testImg.onerror = () => {
                        currentIndex++;
                        tryNextPath();
                    };
                    testImg.src = fallbackPath;
                }
                
                tryNextPath();
            }
            
            // 更新卡片位置 - 实现 3D 弯曲效果
            function updateCardPositions() {
                const cards = gallery.querySelectorAll('.bending-gallery-card');
                console.log(`🎯 更新 ${genre} 卡片位置，找到 ${cards.length} 张卡片`);
                
                cards.forEach((card, index) => {
                    const relativeIndex = index - currentIndex;
                    const angle = (relativeIndex * 40) * (Math.PI / 180); // 40度间隔
                    
                    // 计算 3D 位置，限制在容器范围内
                    const maxRadius = Math.min(radius, 300); // 减小半径，确保卡片在容器内
                    const x = Math.sin(angle) * maxRadius;
                    const z = Math.cos(angle) * maxRadius;
                    const rotateY = relativeIndex * -15; // 减小旋转角度
                    const rotateX = relativeIndex * 3; // 减小X轴旋转
                    
                    // 计算缩放和透明度，确保最小可见性
                    const distance = Math.abs(relativeIndex);
                    const scale = Math.max(0.6, 1 - distance * 0.1); // 提高最小缩放
                    const opacity = Math.max(0.6, 1 - distance * 0.2); // 提高最小透明度
                    
                    console.log(`  📍 卡片 ${index}: ${card.dataset.band}, 位置: x=${x.toFixed(1)}, z=${z.toFixed(1)}, 缩放=${scale.toFixed(2)}, 透明度=${opacity.toFixed(2)}`);
                    
                    // 使用 requestAnimationFrame 确保平滑过渡
                    requestAnimationFrame(() => {
                        // 应用 3D 变换，使用统一的变换顺序
                        card.style.transform = `
                            translate3d(${x}px, 0, ${z}px)
                            rotateY(${rotateY}deg)
                            rotateX(${rotateX}deg)
                            scale(${scale})
                        `;
                        card.style.opacity = opacity;
                        
                        // 优化 Z-index 层级，避免闪烁
                        if (distance === 0) {
                            card.style.zIndex = 1000; // 中心卡片最高层级
                        } else {
                            card.style.zIndex = 100 - distance; // 其他卡片递减层级
                        }
                        
                        // 确保卡片完全可见
                        card.style.visibility = 'visible';
                    });
                });
                console.log(`✅ ${genre} 卡片位置更新完成`);
            }
            
            // 导航函数
            let isTransitioning = false;
            
            function nextBand() {
                if (isTransitioning) return;
                isTransitioning = true;
                
                currentIndex = (currentIndex + 1) % totalBands;
                updateCardPositions();
                
                // 防抖：等待动画完成后再允许下一次操作
                setTimeout(() => {
                    isTransitioning = false;
                }, 800);
            }
            
            function prevBand() {
                if (isTransitioning) return;
                isTransitioning = true;
                
                currentIndex = (currentIndex - 1 + totalBands) % totalBands;
                updateCardPositions();
                
                // 防抖：等待动画完成后再允许下一次操作
                setTimeout(() => {
                    isTransitioning = false;
                }, 800);
            }
            
            // 绑定事件
            nextBtn.addEventListener('click', nextBand);
            prevBtn.addEventListener('click', prevBand);
            
            // 触摸滑动支持
            let startX = 0;
            let endX = 0;
            let touchStartTime = 0;
            
            gallery.addEventListener('touchstart', (e) => {
                startX = e.touches[0].clientX;
                touchStartTime = Date.now();
            });
            
            gallery.addEventListener('touchend', (e) => {
                if (isTransitioning) return;
                
                endX = e.changedTouches[0].clientX;
                const diff = startX - endX;
                const touchDuration = Date.now() - touchStartTime;
                
                // 只有足够距离和时间的触摸才触发
                if (Math.abs(diff) > 50 && touchDuration < 500) {
                    if (diff > 0) {
                        nextBand();
                    } else {
                        prevBand();
                    }
                }
            });
            
            // 鼠标滚轮支持
            let wheelTimeout;
            gallery.addEventListener('wheel', (e) => {
                e.preventDefault();
                
                if (isTransitioning) return;
                
                // 清除之前的滚轮事件
                clearTimeout(wheelTimeout);
                
                wheelTimeout = setTimeout(() => {
                    if (e.deltaY > 0) {
                        nextBand();
                    } else {
                        prevBand();
                    }
                }, 100);
            });
            
            // 初始化
            renderBendingGallery();
            
            // 添加初始加载动画，避免抖动
            setTimeout(() => {
                updateCardPositions();
            }, 100);
            
            // 自动播放
            let autoPlayInterval;
            
            function startAutoPlay() {
                autoPlayInterval = setInterval(() => {
                    if (!isTransitioning) {
                        nextBand();
                    }
                }, 5000);
            }
            
            function stopAutoPlay() {
                if (autoPlayInterval) {
                    clearInterval(autoPlayInterval);
                }
            }
            
            // 用户交互时暂停自动播放
            gallery.addEventListener('mouseenter', stopAutoPlay);
            gallery.addEventListener('touchstart', stopAutoPlay);
            
            // 用户离开时恢复自动播放
            gallery.addEventListener('mouseleave', startAutoPlay);
            gallery.addEventListener('touchend', () => {
                setTimeout(startAutoPlay, 1000);
            });
            
            // 启动自动播放
            startAutoPlay();
        }
        
        function handleCometCardTilt(e) {
            const card = e.currentTarget;
            const rect = card.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            // 计算鼠标在卡片上的相对位置 (0-1)
            const xPercent = x / rect.width;
            const yPercent = y / rect.height;
            
            // 计算倾斜角度 (基于 [Aceternity UI Comet Card](https://ui.aceternity.com/components/comet-card))
            const rotateX = (yPercent - 0.5) * -17.5; // 垂直倾斜
            const rotateY = (xPercent - 0.5) * 17.5;  // 水平倾斜
            
            // 计算位移距离
            const translateX = (xPercent - 0.5) * 20;
            const translateY = (yPercent - 0.5) * 20;
            
            // 应用 3D 变换
            card.style.transform = `
                perspective(1000px) 
                rotateX(${rotateX}deg) 
                rotateY(${rotateY}deg)
                translateX(${translateX}px) 
                translateY(${translateY}px)
                scale3d(1.02, 1.02, 1.02)
            `;
            
            // 为卡片内容添加视差效果
            const content = card.querySelector('.comet-card-content');
            if (content) {
                const icon = content.querySelector('.summary-icon');
                const number = content.querySelector('.summary-number');
                const label = content.querySelector('.summary-label');
                const description = content.querySelector('.summary-description');
                
                // 不同元素有不同的视差深度
                if (icon) icon.style.transform = `translateZ(${30 + rotateY * 0.5}px)`;
                if (number) number.style.transform = `translateZ(${25 + rotateY * 0.4}px)`;
                if (label) label.style.transform = `translateZ(${20 + rotateY * 0.3}px)`;
                if (description) description.style.transform = `translateZ(${15 + rotateY * 0.2}px)`;
            }
            
            // 添加动态阴影效果
            const shadowX = rotateY * 0.5;
            const shadowY = rotateX * 0.5;
            const shadowBlur = 20 + Math.abs(rotateX) * 0.5;
            
            card.style.boxShadow = `
                ${shadowX}px ${shadowY}px ${shadowBlur}px rgba(0, 0, 0, 0.15),
                0 0 30px rgba(102, 126, 234, 0.1)
            `;
        }
        
        function resetCometCardTilt(e) {
            const card = e.currentTarget;
            const content = card.querySelector('.comet-card-content');
            
            // 重置卡片变换
            card.style.transform = 'perspective(1000px) rotateX(0deg) rotateY(0deg) translateX(0px) translateY(0px) scale3d(1, 1, 1)';
            card.style.boxShadow = '0 4px 20px rgba(0, 0, 0, 0.08)';
            
            // 重置内容视差
            if (content) {
                const icon = content.querySelector('.summary-icon');
                const number = content.querySelector('.summary-number');
                const label = content.querySelector('.summary-label');
                const description = content.querySelector('.summary-description');
                
                if (icon) icon.style.transform = 'translateZ(20px)';
                if (number) number.style.transform = 'translateZ(15px)';
                if (label) label.style.transform = 'translateZ(10px)';
                if (description) description.style.transform = 'translateZ(5px)';
            }
        }
        
        // 碟片音乐播放器功能 - 完全独立版本
        function initVinylMusicPlayer() {
            console.log('🎵 初始化碟片音乐播放器 - 完全独立版本...');
            
            // 直接查找音乐类型按钮
            const genreOptions = document.querySelectorAll('.genre-option');
            console.log('🎼 找到音乐类型按钮数量:', genreOptions.length);
            
            if (genreOptions.length === 0) {
                console.error('❌ 没有找到音乐类型按钮！');
                return;
            }
            
            // 音乐曲目数据
            const musicData = {
                rock: {
                    title: 'Classic Rock Hits',
                    artist: 'Various Artists',
                    duration: '4:32',
                    color: '#e53e3e'
                },
                pop: {
                    title: 'Pop Music Collection',
                    artist: 'Top Artists',
                    duration: '3:45',
                    color: '#3182ce'
                },
                metal: {
                    title: 'Heavy Metal Anthems',
                    artist: 'Metal Legends',
                    duration: '5:18',
                    color: '#805ad5'
                }
            };
            
            let currentGenre = '';
            
            // 音乐类型选择 - 核心功能
            console.log('🎼 开始绑定音乐类型选择事件...');
            genreOptions.forEach((option, index) => {
                console.log(`🎼 为按钮 ${index + 1} 绑定事件:`, option.dataset.genre);
                
                // 移除所有现有的事件监听器
                const newOption = option.cloneNode(true);
                option.parentNode.replaceChild(newOption, option);
                
                // 重新绑定事件
                newOption.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    const genre = this.dataset.genre;
                    console.log(`🎼 按钮被点击！选择音乐类型: ${genre}`);
                    
                    // 添加点击反馈
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 150);
                    
                    // 更新按钮状态
                    genreOptions.forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    currentGenre = genre;
                    
                    // 更新显示信息
                    const trackTitle = document.getElementById('trackTitle');
                    const trackArtist = document.getElementById('trackArtist');
                    const totalTime = document.getElementById('totalTime');
                    
                    if (trackTitle && trackArtist && totalTime) {
                        const data = musicData[genre];
                        if (data) {
                            trackTitle.textContent = data.title;
                            trackArtist.textContent = data.artist;
                            totalTime.textContent = data.duration;
                            console.log(`🎼 更新显示信息: ${data.title} - ${data.artist}`);
                        }
                    }
                    
                    // 更新碟片标签
                    const artistName = document.querySelector('.artist-name');
                    const songTitle = document.querySelector('.song-title');
                    if (artistName && songTitle) {
                        const data = musicData[genre];
                        if (data) {
                            artistName.textContent = data.artist;
                            songTitle.textContent = data.title;
                        }
                    }
                    
                    // 显示选择确认
                    showGenreSelectionFeedback(genre);
                });
                
                console.log(`🎼 按钮 ${index + 1} 事件绑定完成`);
            });
            
            console.log('🎼 所有音乐类型选择事件绑定完成');
            
            // 平台链接
            const platformLinks = document.querySelectorAll('.platform-link');
            platformLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const platform = this.dataset.platform;
                    console.log(`🌐 平台链接被点击: ${platform}`);
                    
                    if (!currentGenre) {
                        alert('Please select a music genre first!');
                        return;
                    }
                    
                    // 打开对应的音乐平台
                    const platformUrls = {
                        spotify: 'https://open.spotify.com/',
                        youtube: 'https://www.youtube.com/',
                        apple: 'https://music.apple.com/',
                        amazon: 'https://music.amazon.com/'
                    };
                    
                    const url = platformUrls[platform];
                    if (url) {
                        window.open(url, '_blank');
                        console.log(`🌐 打开平台: ${platform}`);
                    }
                });
            });
            
            function showGenreSelectionFeedback(genre) {
                // 创建临时反馈提示
                const feedback = document.createElement('div');
                feedback.textContent = `🎵 Selected: ${genre.toUpperCase()}`;
                feedback.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: linear-gradient(45deg, #667eea, #f093fb);
                    color: white;
                    padding: 12px 20px;
                    border-radius: 25px;
                    font-weight: 600;
                    z-index: 1000;
                    animation: slideInRight 0.5s ease;
                    box-shadow: 0 4px 20px rgba(102, 126, 234, 0.3);
                `;
                
                document.body.appendChild(feedback);
                
                // 3秒后自动移除
                setTimeout(() => {
                    feedback.style.animation = 'slideOutRight 0.5s ease';
                    setTimeout(() => {
                        if (feedback.parentNode) {
                            feedback.parentNode.removeChild(feedback);
                        }
                    }, 500);
                }, 3000);
            }
            
            // 初始化默认选择第一个类型
            if (genreOptions.length > 0) {
                console.log('🎯 自动选择第一个音乐类型');
                genreOptions[0].click();
            }
            
            console.log('🎵 碟片播放器初始化完成 - 完全独立版本');
            console.log('🎵 音乐类型按钮现在应该可以正常工作了！');
        }
        
        // 页面加载完成后初始化所有功能
        window.addEventListener('load', function() {
            console.log('🚀 页面加载完成，准备初始化所有功能...');
            
            // 立即检查按钮是否存在
            const genreButtons = document.querySelectorAll('.genre-option');
            const travelButton = document.querySelector('.stats-button');
            
            console.log('🔍 立即检查 - 找到的音乐类型按钮数量:', genreButtons.length);
            console.log('🔍 立即检查 - 找到的旅行详情按钮:', !!travelButton);
            
            if (genreButtons.length === 0) {
                console.error('❌ 页面加载时没有找到音乐类型按钮！');
            }
            
            if (!travelButton) {
                console.error('❌ 页面加载时没有找到旅行详情按钮！');
            }
            
            // 立即初始化播放器
            console.log('🎵 立即初始化 Vinyl Music Player...');
            initVinylMusicPlayer();
            
            // 延迟初始化其他功能，确保DOM完全加载
            setTimeout(function() {
                console.log('⏰ 延迟1秒后开始初始化其他功能...');
                
                // 初始化旅行详情按钮
                if (travelButton) {
                    initTravelDetailsButton();
                }
                
                // 初始化科技感旅行地图
                console.log('🗺️ 开始初始化科技感旅行地图...');
                setTimeout(() => {
                    initTechTravelMap();
                }, 500);
            }, 1000);
        });
        
        // 地图功能已删除，等待重新实现
        
        // 创建完整的110m Physical地图效果 - 基于我们之前做过的代码
        // 初始化科技感旅行地图
        function initTechTravelMap() {
            console.log('🗺️ 初始化科技感旅行地图...');
            
            const container = document.getElementById('interactiveGlobe');
            if (!container) {
                console.error('❌ 地图容器不存在');
                return;
            }
            
            console.log('✅ 找到地图容器:', container);
            
            try {
                // 等待TechTravelMap类加载
                if (typeof TechTravelMap === 'undefined') {
                    console.log('⏳ 等待TechTravelMap类加载...');
                    setTimeout(() => {
                        initTechTravelMap();
                    }, 1000);
                    return;
                }
                
                console.log('✅ TechTravelMap类可用，开始创建地图实例...');
                
                // 创建科技感旅行地图实例
                const techMap = new TechTravelMap(container, {
                    // 可以在这里添加自定义配置
                });
                
                console.log('✅ 科技感旅行地图初始化完成');
                
                // 存储地图实例以便后续使用
                window.techMapInstance = techMap;
                
            } catch (error) {
                console.error('❌ 地图初始化失败:', error);
                // 使用备用方案
                showGlobeFallback(container);
            }
        }
        
        // Globe备用方案
        function showGlobeFallback(container) {
            console.log('🔄 显示Globe备用方案...');
            
            container.innerHTML = `
                <div style="
                    width: 100%;
                    height: 100%;
                    min-height: 400px;
                    background: radial-gradient(circle at center, #1e293b 0%, #0f172a 100%);
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    color: white;
                    text-align: center;
                    box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
                    position: relative;
                    overflow: hidden;
                ">
                    <div style="position: relative; z-index: 2;">
                        <div style="font-size: 64px; margin-bottom: 20px;">🌍</div>
                        <div style="font-size: 24px; font-weight: bold; margin-bottom: 12px;">Interactive Globe</div>
                        <div style="font-size: 16px; opacity: 0.8; margin-bottom: 8px;">14 Travel Destinations</div>
                        <div style="font-size: 14px; opacity: 0.6;">Age 3-15 Journey</div>
                    </div>
                    <div style="
                        position: absolute;
                        width: 200%;
                        height: 200%;
                        background: conic-gradient(from 0deg, transparent, rgba(59, 130, 246, 0.3), transparent);
                        animation: rotate 20s linear infinite;
                        top: -50%;
                        left: -50%;
                    "></div>
                    
                    <!-- Travel Markers on Fallback Globe -->
                    <div style="position: absolute; top: 20%; left: 30%; width: 8px; height: 8px; background: #0ea5e9; border-radius: 50%; animation: pulse 2s infinite;"></div>
                    <div style="position: absolute; top: 25%; right: 35%; width: 8px; height: 8px; background: #8b5cf6; border-radius: 50%; animation: pulse 2s infinite 0.5s;"></div>
                    <div style="position: absolute; bottom: 30%; left: 40%; width: 8px; height: 8px; background: #06d6a0; border-radius: 50%; animation: pulse 2s infinite 1s;"></div>
                    <div style="position: absolute; bottom: 35%; right: 25%; width: 8px; height: 8px; background: #f72585; border-radius: 50%; animation: pulse 2s infinite 1.5s;"></div>
                </div>
                <style>
                    @keyframes rotate {
                        from { transform: rotate(0deg); }
                        to { transform: rotate(360deg); }
                    }
                    @keyframes pulse {
                        0%, 100% { transform: scale(1); opacity: 1; }
                        50% { transform: scale(1.5); opacity: 0.7; }
                    }
                </style>
            `;
            
            console.log('✅ Globe备用方案已显示');
        }
        
        // 添加DOMContentLoaded事件作为备用
        document.addEventListener('DOMContentLoaded', function() {
            console.log('📄 DOM内容加载完成');
            
            // 尝试立即初始化播放器
            if (typeof initVinylMusicPlayer === 'function') {
                console.log('🎵 DOM加载完成后立即初始化播放器...');
                try {
                    initVinylMusicPlayer();
                    console.log('✅ 播放器初始化成功');
                } catch (error) {
                    console.error('❌ 播放器初始化失败:', error);
                }
            } else {
                console.log('⏳ 播放器函数还未定义，等待页面加载完成...');
            }
            
            // 初始化简单测试播放器
            initSimpleTestPlayer();
        });
        
        // 简单测试播放器
        function initSimpleTestPlayer() {
            console.log('🎵 初始化简单测试播放器...');
            
            const testAudio = document.getElementById('testAudio');
            const debugTestBtn = document.getElementById('debugTestBtn');
            const debugOutput = document.getElementById('debugOutput');
            
            if (!testAudio) {
                console.error('❌ 找不到测试音频元素');
                return;
            }
            
            if (!debugTestBtn || !debugOutput) {
                console.error('❌ 找不到调试按钮或输出区域');
                return;
            }
            
            // 测试按钮点击事件
            debugTestBtn.addEventListener('click', function() {
                console.log('🔧 调试测试按钮被点击');
                
                // 检查测试音频状态
                const audioStatus = `
                    <div>🎵 测试播放器状态:</div>
                    <div>- 测试音频元素: ${!!testAudio ? '✅ 存在' : '❌ 不存在'}</div>
                    <div>- 音频源: ${testAudio.src}</div>
                    <div>- 音频状态: ${testAudio.paused ? '⏸ 暂停' : '▶️ 播放中'}</div>
                    <div>- 音频时长: ${testAudio.duration || '未知'}</div>
                    <div>- 音频就绪状态: ${testAudio.readyState}</div>
                `;
                
                debugOutput.innerHTML = audioStatus;
                
                // 尝试播放测试音频
                try {
                    testAudio.play().then(() => {
                        debugOutput.innerHTML += '<div style="color: green; margin-top: 10px;">✅ 测试音频播放成功!</div>';
                    }).catch(err => {
                        debugOutput.innerHTML += `<div style="color: red; margin-top: 10px;">❌ 测试音频播放失败: ${err.message}</div>`;
                    });
                } catch (error) {
                    debugOutput.innerHTML += `<div style="color: red; margin-top: 10px;">❌ 测试音频播放异常: ${error.message}</div>`;
                }
            });
            
            // 测试音频事件监听
            testAudio.addEventListener('loadstart', () => console.log('🔄 测试音频开始加载'));
            testAudio.addEventListener('canplay', () => console.log('✅ 测试音频可以播放'));
            testAudio.addEventListener('canplaythrough', () => console.log('✅ 测试音频可以流畅播放'));
            testAudio.addEventListener('error', (e) => console.error('❌ 测试音频加载错误:', e));
            
            console.log('✅ 简单测试播放器初始化完成');
        }
        
        // 按钮点击波纹效果
        document.addEventListener('DOMContentLoaded', function() {
            const statsButton = document.querySelector('.stats-button');
            
            if (statsButton) {
                statsButton.addEventListener('click', function(e) {
                    // 创建波纹效果
                    const ripple = document.createElement('span');
                    const rect = this.getBoundingClientRect();
                    const size = Math.max(rect.width, rect.height);
                    const x = e.clientX - rect.left - size / 2;
                    const y = e.clientY - rect.top - size / 2;
                    
                    ripple.style.cssText = `
                        position: absolute;
                        width: ${size}px;
                        height: ${size}px;
                        left: ${x}px;
                        top: ${y}px;
                        background: rgba(255, 255, 255, 0.3);
                        border-radius: 50%;
                        transform: scale(0);
                        animation: ripple-animation 0.6s linear;
                        pointer-events: none;
                    `;
                    
                    this.appendChild(ripple);
                    
                    // 动画结束后移除波纹元素
                    setTimeout(() => {
                        ripple.remove();
                    }, 600);
                });
            }
        });
        
        // 旅行详情弹窗功能
        function showTravelDetails() {
            console.log('🎯 showTravelDetails函数被调用');
            
            const modal = document.getElementById('travelModal');
            console.log('🔍 查找travelModal元素:', modal);
            
            if (modal) {
                console.log('✅ 找到modal元素，开始显示弹窗');
                modal.style.display = 'flex';
                document.body.style.overflow = 'hidden'; // 防止背景滚动
                
                // 添加动画效果
                setTimeout(() => {
                    modal.classList.add('modal-active');
                    console.log('🎬 弹窗动画已启动');
                }, 10);
            } else {
                console.error('❌ 没有找到travelModal元素！');
                console.log('🔍 当前页面中的所有元素:', document.querySelectorAll('*'));
            }
        }
        
        // 照片弹窗 - Draggable Card版本
        function showPhotosModal(place) {
            console.log('📷 打开照片弹窗, 地点:', place);
            const modal = document.getElementById('photosModal');
            const gallery = document.getElementById('photosGallery');
            if (!modal || !gallery) return;

            // 旅行照片数据 - 使用本地照片文件夹
            // 简化路径处理，直接使用英文目录名
            function rewritePhotoUrl(input) {
                try {
                    if (!input || typeof input !== 'string') return '';
                    // 直接返回路径，因为photoData中已经使用正确的英文目录名
                    return encodeURI(input);
                } catch (e) {
                    console.error('rewritePhotoUrl error:', e);
                    return input;
                }
            }
            const photoData = {
                'Thailand': [
                    { url: 'my photos/Thailand/Weixin Image_20250825230101_3.jpg', title: 'Tropical Beach', description: 'Beautiful beaches and crystal clear waters', date: '2010' },
                    { url: 'my photos/Thailand/Weixin Image_20250825230101_5.jpg', title: 'Temple Visit', description: 'Ancient temples and cultural heritage', date: '2010' },
                    { url: 'my photos/Thailand/Weixin Image_20250825230059_46.jpg', title: 'Street Food', description: 'Delicious Thai street food experience', date: '2010' },
                    { url: 'my photos/Thailand/Weixin Image_20250825230059_47.jpg', title: 'Cultural Experience', description: 'Rich Thai cultural heritage', date: '2010' },
                    { url: 'my photos/Thailand/Weixin Image_20250825230000_22.jpg', title: 'Local Life', description: 'Authentic local lifestyle', date: '2010' }
                ],
                'Taiwan': [
                    { url: 'my photos/Taiwan/Weixin Image_20250825230120_9.jpg', title: 'Mountain Views', description: 'Stunning mountain landscapes', date: '2013' },
                    { url: 'my photos/Taiwan/Weixin Image_20250825230120_10.jpg', title: 'Night Market', description: 'Vibrant night market culture', date: '2013' },
                    { url: 'my photos/Taiwan/Weixin Image_20250825230120_11.jpg', title: 'Cultural Sites', description: 'Rich cultural heritage sites', date: '2013' },
                    { url: 'my photos/Taiwan/Weixin Image_20250825230120_13.jpg', title: 'City Life', description: 'Urban exploration', date: '2013' },
                    { url: 'my photos/Taiwan/Weixin Image_20250825230120_16.jpg', title: 'Nature', description: 'Beautiful scenery', date: '2013' },
                    { url: 'my photos/Taiwan/Weixin Image_20250825230120_17.jpg', title: 'Culture', description: 'Local traditions', date: '2013' },
                    { url: 'my photos/Taiwan/Weixin Image_20250825230120_18.jpg', title: 'Food', description: 'Delicious cuisine', date: '2013' }
                ],
                "Xi'an, China": [
                    { url: 'my photos/Xi\'an/Weixin Image_20250825230100_11.jpg', title: 'Terracotta Warriors', description: 'Ancient terracotta army discovery', date: '2015' }
                ],
                'Hong Kong & Macau': [
                    { url: 'my photos/Hong Kong + Macau/Weixin Image_20250825230059_44.jpg', title: 'Victoria Harbor', description: 'Iconic harbor skyline views', date: '2016' },
                    { url: 'my photos/Hong Kong + Macau/Weixin Image_20250825230059_45.jpg', title: 'Skyline Night', description: 'Harbor nightscape', date: '2016' },
                    { url: 'my photos/Hong Kong + Macau/Weixin Image_20250825230100_10.jpg', title: 'Macau Architecture', description: 'Portuguese colonial architecture', date: '2016' },
                    { url: 'my photos/Hong Kong + Macau/Weixin Image_20250825230100_12.jpg', title: 'Street Markets', description: 'Bustling street market culture', date: '2016' }
                ],
                'Vietnam': [
                    { url: 'my photos/Vietnam/Weixin Image_20250825230101_1.jpg', title: 'Halong Bay', description: 'Majestic limestone islands', date: '2018' },
                    { url: 'my photos/Vietnam/Weixin Image_20250825230101_2.jpg', title: 'Ho Chi Minh City', description: 'Modern Vietnamese metropolis', date: '2018' },
                    { url: 'my photos/Vietnam/Weixin Image_20250825230101_4.jpg', title: 'Ancient Town', description: 'Cultural heritage', date: '2018' },
                    { url: 'my photos/Vietnam/Weixin Image_20250825230101_6.jpg', title: 'Street Food', description: 'Authentic Vietnamese cuisine', date: '2018' },
                    { url: 'my photos/Vietnam/Weixin Image_20250825230101_7.jpg', title: 'Cultural Experience', description: 'Rich Vietnamese culture', date: '2018' },
                    { url: 'my photos/Vietnam/Weixin Image_20250825230101_8.jpg', title: 'Local Life', description: 'Authentic local lifestyle', date: '2018' },
                    { url: 'my photos/Vietnam/Weixin Image_20250825230101_9.jpg', title: 'Natural Beauty', description: 'Stunning landscapes', date: '2018' }
                ],
                'Singapore & Malaysia': [
                    // 目录暂空，使用默认占位（在下方length判断中处理）
                ],
                'Siguniang Mountain, China': [
                    { url: 'my photos/Siguniang Mountain/Weixin Image_20250825230059_37.jpg', title: 'Snow Peaks', description: 'Four beautiful snow-capped peaks', date: '2017' },
                    { url: 'my photos/Siguniang Mountain/Weixin Image_20250825230059_38.jpg', title: 'Alpine Meadows', description: 'High altitude alpine landscapes', date: '2017' },
                    { url: 'my photos/Siguniang Mountain/Weixin Image_20250825230059_39.jpg', title: 'Mountain Hiking', description: 'Adventure hiking experience', date: '2017' },
                    { url: 'my photos/Siguniang Mountain/Weixin Image_20250825230059_40.jpg', title: 'Natural Beauty', description: 'Stunning natural scenery', date: '2017' },
                    { url: 'my photos/Siguniang Mountain/Weixin Image_20250825230059_41.jpg', title: 'High Altitude', description: 'Breathtaking mountain views', date: '2017' },
                    { url: 'my photos/Siguniang Mountain/Weixin Image_20250825230059_42.jpg', title: 'Adventure', description: 'Mountain climbing challenge', date: '2017' },
                    { url: 'my photos/Siguniang Mountain/Weixin Image_20250825230059_43.jpg', title: 'Landscape', description: 'Majestic mountain landscapes', date: '2017' }
                ],
                'Beijing, China': [
                    { url: 'my photos/Beijing/Weixin Image_20250825230100_27.jpg', title: 'Forbidden City', description: 'Imperial palace complex', date: '2019' },
                    { url: 'my photos/Beijing/Weixin Image_20250825230100_28.jpg', title: 'Great Wall', description: 'Ancient defensive structure', date: '2019' },
                    { url: 'my photos/Beijing/Weixin Image_20250825230100_29.jpg', title: 'Temple of Heaven', description: 'Sacred imperial temple', date: '2019' },
                    { url: 'my photos/Beijing/Weixin Image_20250825230100_30.jpg', title: 'Cultural Heritage', description: 'Rich Chinese history', date: '2019' },
                    { url: 'my photos/Beijing/Weixin Image_20250825230100_31.jpg', title: 'Ancient Architecture', description: 'Traditional Chinese buildings', date: '2019' },
                    { url: 'my photos/Beijing/Weixin Image_20250825230100_32.jpg', title: 'Imperial Gardens', description: 'Beautiful royal gardens', date: '2019' },
                    { url: 'my photos/Beijing/Weixin Image_20250825230100_33.jpg', title: 'Historical Sites', description: 'Important historical locations', date: '2019' },
                    { url: 'my photos/Beijing/Weixin Image_20250825230100_34.jpg', title: 'City Views', description: 'Panoramic city views', date: '2019' },
                    { url: 'my photos/Beijing/Weixin Image_20250825230059_35.jpg', title: 'Cultural Experience', description: 'Traditional Chinese culture', date: '2019' },
                    { url: 'my photos/Beijing/Weixin Image_20250825230059_36.jpg', title: 'Modern Beijing', description: 'Contemporary city life', date: '2019' }
                ],
                'Dubai, UAE': [
                    { url: 'my photos/Dubai/Weixin Image_20250825230100_23.jpg', title: 'Burj Khalifa', description: 'World\'s tallest building', date: '2019' },
                    { url: 'my photos/Dubai/Weixin Image_20250825230100_24.jpg', title: 'Desert Safari', description: 'Arabian desert adventure', date: '2019' },
                    { url: 'my photos/Dubai/Weixin Image_20250825230100_25.jpg', title: 'Palm Jumeirah', description: 'Artificial island paradise', date: '2019' },
                    { url: 'my photos/Dubai/Weixin Image_20250825230100_26.jpg', title: 'Modern Architecture', description: 'Futuristic city design', date: '2019' }
                ],
                'Yunnan & Guizhou, China': [
                    { url: 'my photos/Yunnan + Guizhou/Weixin Image_20250825230059_48.jpg', title: 'Stone Forest', description: 'Natural karst formations', date: '2021' },
                    { url: 'my photos/Yunnan + Guizhou/Weixin Image_20250825230059_49.jpg', title: 'Ethnic Villages', description: 'Traditional minority culture', date: '2021' },
                    { url: 'my photos/Yunnan + Guizhou/Weixin Image_20250825230059_50.jpg', title: 'Mountain Landscapes', description: 'Spectacular mountain views', date: '2021' }
                ],
                'Atlanta, USA': [
                    // 当前目录为 USA/（暂空），保留默认占位
                ]
            };

            const photos = (place && photoData[place] && photoData[place].length) ? photoData[place] : [
                { url: 'my photos/Thailand/Weixin Image_20250825230101_3.jpg', title: 'Travel Adventure', description: 'Amazing travel memories', date: '2010' },
                { url: 'my photos/Beijing/Weixin Image_20250825230100_27.jpg', title: 'Cultural Experience', description: 'Rich cultural heritage', date: '2019' },
                { url: 'my photos/Siguniang Mountain/Weixin Image_20250825230059_37.jpg', title: 'Natural Beauty', description: 'Stunning natural landscapes', date: '2017' }
            ];

            // 创建Draggable Card
            console.log('Photos to display:', photos);
            gallery.innerHTML = photos.map((photo, index) => {
                const processedUrl = rewritePhotoUrl(photo.url);
                console.log(`Photo ${index}:`, photo.url, '->', processedUrl);
                return `
                    <div class="draggable-card" data-index="${index}">
                        <img src="${processedUrl}" alt="photo-${index}" class="card-image" onerror="console.error('Failed to load image:', this.src)">
                    </div>
                `;
            }).join('');

            // 初始化Draggable Card功能
            initDraggableCards();

            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
            setTimeout(() => modal.classList.add('modal-active'), 10);
        }

        // 初始化Draggable Card功能
        function initDraggableCards() {
            const cards = document.querySelectorAll('.draggable-card');
            
            cards.forEach(card => {
                let isDragging = false;
                let startX, startY, startRotateX, startRotateY;
                let currentX = 0, currentY = 0;
                let currentRotateX = 0, currentRotateY = 0;

                // 鼠标按下事件
                card.addEventListener('mousedown', (e) => {
                    isDragging = true;
                    card.classList.add('dragging');
                    
                    startX = e.clientX - currentX;
                    startY = e.clientY - currentY;
                    startRotateX = currentRotateX;
                    startRotateY = currentRotateY;
                    
                    e.preventDefault();
                });

                // 鼠标移动事件
                document.addEventListener('mousemove', (e) => {
                    if (!isDragging) return;
                    
                    currentX = e.clientX - startX;
                    currentY = e.clientY - startY;
                    
                    // 计算倾斜角度
                    const rect = card.getBoundingClientRect();
                    const centerX = rect.left + rect.width / 2;
                    const centerY = rect.top + rect.height / 2;
                    
                    const deltaX = e.clientX - centerX;
                    const deltaY = e.clientY - centerY;
                    
                    currentRotateX = startRotateX + (deltaY / 10);
                    currentRotateY = startRotateY + (deltaX / 10);
                    
                    // 应用变换
                    card.style.transform = `translate(${currentX}px, ${currentY}px) rotateX(${currentRotateX}deg) rotateY(${currentRotateY}deg)`;
                });

                // 鼠标释放事件
                document.addEventListener('mouseup', () => {
                    if (!isDragging) return;
                    
                    isDragging = false;
                    card.classList.remove('dragging');
                    
                    // 弹性回弹动画
                    animateCardReturn(card, currentX, currentY, currentRotateX, currentRotateY);
                });

                // 鼠标悬停效果
                card.addEventListener('mouseenter', () => {
                    if (!isDragging) {
                        card.style.transform = 'translateY(-8px) scale(1.02)';
                    }
                });

                card.addEventListener('mouseleave', () => {
                    if (!isDragging) {
                        card.style.transform = 'translate(0, 0) rotateX(0deg) rotateY(0deg)';
                    }
                });
            });
        }

        // 卡片回弹动画
        function animateCardReturn(card, x, y, rotateX, rotateY) {
            const duration = 600;
            const startTime = performance.now();
            
            function animate(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                
                // 使用缓动函数
                const easeOut = 1 - Math.pow(1 - progress, 3);
                
                const currentX = x * (1 - easeOut);
                const currentY = y * (1 - easeOut);
                const currentRotateX = rotateX * (1 - easeOut);
                const currentRotateY = rotateY * (1 - easeOut);
                
                card.style.transform = `translate(${currentX}px, ${currentY}px) rotateX(${currentRotateX}deg) rotateY(${currentRotateY}deg)`;
                
                if (progress < 1) {
                    requestAnimationFrame(animate);
                } else {
                    card.style.transform = 'translate(0, 0) rotateX(0deg) rotateY(0deg)';
                }
            }
            
            requestAnimationFrame(animate);
        }

        function closePhotosModal() {
            const modal = document.getElementById('photosModal');
            if (!modal) return;
            modal.classList.remove('modal-active');
            setTimeout(() => {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }, 300);
        }

        function closeTravelModal() {
            const modal = document.getElementById('travelModal');
            if (modal) {
                modal.classList.remove('modal-active');
                setTimeout(() => {
                    modal.style.display = 'none';
                    document.body.style.overflow = 'auto'; // 恢复背景滚动
                }, 300);
            }
        }
        
        // 点击遮罩层关闭弹窗
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🚀 DOM加载完成，初始化弹窗功能');
            
            const modal = document.getElementById('travelModal');
            const overlay = modal?.querySelector('.modal-overlay');
            
            if (overlay) {
                overlay.addEventListener('click', closePhotosModal);
                console.log('✅ 遮罩层点击事件已绑定');
            }
            
            // ESC键关闭弹窗
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeTravelModal();
                }
            });
            
            // 备用：直接绑定按钮点击事件
            const statsButton = document.querySelector('.stats-button');
            if (statsButton) {
                console.log('🔘 找到stats-button，绑定备用点击事件');
                statsButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('🖱️ 备用事件监听器：按钮被点击');
                    showPhotosModal();
                });
            } else {
                console.error('❌ 没有找到stats-button按钮');
            }
        });
    </script>
</body>
</html>

